(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3680],{18471:function(e){var t;"undefined"!=typeof self&&self,t=()=>(()=>{var e=[,function(e,t,r){var i,s=r(2);i=function(){"use strict";function e(e){return"function"==typeof e}var t,i,n,o,a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=0,u=void 0,d=void 0,h=function(e,t){b[l]=e,b[l+1]=t,2===(l+=2)&&(d?d(v):E())},c="undefined"!=typeof window?window:void 0,_=c||{},g=_.MutationObserver||_.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==s&&"[object process]"===({}).toString.call(s),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function y(){var e=setTimeout;return function(){return e(v,1)}}var b=Array(1e3);function v(){for(var e=0;e<l;e+=2)(0,b[e])(b[e+1]),b[e]=void 0,b[e+1]=void 0;l=0}var E=void 0;function m(e,t){var r,i=arguments,s=this,n=new this.constructor(S);void 0===n[P]&&H(n);var o=s._state;return o?(r=i[o-1],h(function(){return N(o,n,r,s._result)})):C(s,n,e,t),n}function k(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return x(t,e),t}p?E=function(){return s.nextTick(v)}:g?(t=0,i=new g(v),n=document.createTextNode(""),i.observe(n,{characterData:!0}),E=function(){n.data=t=++t%2}):f?((o=new MessageChannel).port1.onmessage=v,E=function(){return o.port2.postMessage(0)}):E=void 0===c?function(){try{var e=r(3);return u=e.runOnLoop||e.runOnContext,void 0!==u?function(){u(v)}:y()}catch(e){return y()}}():y();var P=Math.random().toString(36).substring(16);function S(){}var w=void 0,R=new T;function D(e){try{return e.then}catch(e){return R.error=e,R}}function O(t,r,i){r.constructor===t.constructor&&i===m&&r.constructor.resolve===k?1===r._state?j(t,r._result):2===r._state?F(t,r._result):C(r,void 0,function(e){return x(t,e)},function(e){return F(t,e)}):i===R?F(t,R.error):void 0===i?j(t,r):e(i)?h(function(e){var t=!1,s=function(e,t,r,i){try{e.call(t,r,i)}catch(e){return e}}(i,r,function(i){t||(t=!0,r!==i?x(e,i):j(e,i))},function(r){t||(t=!0,F(e,r))},"Settle: "+(e._label||" unknown promise"));!t&&s&&(t=!0,F(e,s))},t):j(t,r)}function x(e,t){e===t?F(e,TypeError("You cannot resolve a promise with itself")):"function"==typeof t||"object"==typeof t&&null!==t?O(e,t,D(t)):j(e,t)}function A(e){e._onerror&&e._onerror(e._result),M(e)}function j(e,t){e._state===w&&(e._result=t,e._state=1,0!==e._subscribers.length&&h(M,e))}function F(e,t){e._state===w&&(e._state=2,e._result=t,h(A,e))}function C(e,t,r,i){var s=e._subscribers,n=s.length;e._onerror=null,s[n]=t,s[n+1]=r,s[n+2]=i,0===n&&e._state&&h(M,e)}function M(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i=void 0,s=void 0,n=e._result,o=0;o<t.length;o+=3)i=t[o],s=t[o+r],i?N(r,i,s,n):s(n);e._subscribers.length=0}}function T(){this.error=null}var I=new T;function N(t,r,i,s){var n=e(i),o=void 0,a=void 0,l=void 0,u=void 0;if(n){if((o=function(e,t){try{return e(t)}catch(e){return I.error=e,I}}(i,s))===I?(u=!0,a=o.error,o=null):l=!0,r===o){F(r,TypeError("A promises callback cannot return that same promise."));return}}else o=s,l=!0;r._state!==w||(n&&l?x(r,o):u?F(r,a):1===t?j(r,o):2===t&&F(r,o))}var L=0;function H(e){e[P]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}function U(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[P]||H(this.promise),a(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):F(this.promise,Error("Array Methods must be provided an Array"))}function q(e){this[P]=L++,this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&function(){throw TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(e,t){try{t(function(t){x(e,t)},function(t){F(e,t)})}catch(t){F(e,t)}}(this,e):function(){throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return U.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===w&&r<e;r++)this._eachEntry(t[r],r)},U.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,i=r.resolve;if(i===k){var s=D(e);if(s===m&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof s)this._remaining--,this._result[t]=e;else if(r===q){var n=new r(S);O(n,e,s),this._willSettleAt(n,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},U.prototype._settledAt=function(e,t,r){var i=this.promise;i._state===w&&(this._remaining--,2===e?F(i,r):this._result[t]=r),0===this._remaining&&j(i,this._result)},U.prototype._willSettleAt=function(e,t){var r=this;C(e,void 0,function(e){return r._settledAt(1,t,e)},function(e){return r._settledAt(2,t,e)})},q.all=function(e){return new U(this,e).promise},q.race=function(e){var t=this;return new t(a(e)?function(r,i){for(var s=e.length,n=0;n<s;n++)t.resolve(e[n]).then(r,i)}:function(e,t){return t(TypeError("You must pass an array to race."))})},q.resolve=k,q.reject=function(e){var t=new this(S);return F(t,e),t},q._setScheduler=function(e){d=e},q._setAsap=function(e){h=e},q._asap=h,q.prototype={constructor:q,then:m,catch:function(e){return this.then(null,e)}},q.polyfill=function(){var e=void 0;if(void 0!==r.g)e=r.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=q},q.Promise=q,q},e.exports=i()},e=>{var t,r,i,s=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],u=!1,d=-1;function h(){u&&i&&(u=!1,i.length?l=i.concat(l):d=-1,l.length&&c())}function c(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(i=l,l=[];++d<t;)i&&i[d].run();d=-1,t=l.length}i=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new _(e,t)),1!==l.length||u||a(c)},_.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}},()=>{},function(e){var t,r,i,s,n;t=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,n={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var s=n.parseURL(e);if(!s)throw Error("Error trying to parse base URL.");return s.path=n.normalizePath(s.path),n.buildURLFromParts(s)}var o=n.parseURL(t);if(!o)throw Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=n.normalizePath(o.path),n.buildURLFromParts(o)):t;var a=n.parseURL(e);if(!a)throw Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=r.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=a.netLoc,"/"!==o.path[0])){if(o.path){var d=a.path,h=d.substring(0,d.lastIndexOf("/")+1)+o.path;u.path=n.normalizePath(h)}else u.path=a.path,o.params||(u.params=a.params,o.query||(u.query=a.query))}return null===u.path&&(u.path=i.alwaysNormalize?n.normalizePath(o.path):o.path),n.buildURLFromParts(u)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=n},(e,t,r)=>{"use strict";e.exports=r(6)()?WeakMap:r(7)},e=>{"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&"function"==typeof e.set&&e.set({},1)===e&&"function"==typeof e.delete&&"function"==typeof e.has&&"one"===e.get(t)}},(e,t,r)=>{"use strict";var i,s=r(8),n=r(16),o=r(14),a=r(17),l=r(18),u=r(34),d=r(75),h=r(38).toStringTag,c=r(76),_=Array.isArray,g=Object.defineProperty,p=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf;e.exports=i=function(){var e,t=arguments[0];if(!(this instanceof i))throw TypeError("Constructor requires 'new'");return c&&s&&WeakMap!==i?e=s(new WeakMap,f(this)):e=this,null==t||_(t)||(t=u(t)),g(e,"__weakMapData__",l("c","$weakMap$"+a())),t&&d(t,function(t){o(t),e.set(t[0],t[1])}),e},c&&(s&&s(i,WeakMap),i.prototype=Object.create(WeakMap.prototype,{constructor:l(i)})),Object.defineProperties(i.prototype,{delete:l(function(e){return!!p.call(n(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:l(function(e){if(p.call(n(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:l(function(e){return p.call(n(e),this.__weakMapData__)}),set:l(function(e,t){return g(n(e),this.__weakMapData__,l("c",t)),this}),toString:l(function(){return"[object WeakMap]"})}),g(i.prototype,h,l("c","WeakMap"))},(e,t,r)=>{"use strict";e.exports=r(9)()?Object.setPrototypeOf:r(10)},e=>{"use strict";var t=Object.create,r=Object.getPrototypeOf,i={};e.exports=function(){var e=Object.setPrototypeOf,s=arguments[0]||t;return"function"==typeof e&&r(e(s(null),i))===i}},(e,t,r)=>{"use strict";var i,s,n,o,a=r(11),l=r(14),u=Object.prototype.isPrototypeOf,d=Object.defineProperty,h={configurable:!0,enumerable:!1,writable:!0,value:void 0};o=function(e,t){if(l(e),null===t||a(t))return e;throw TypeError("Prototype must be null or an object")},e.exports=(i=function(){var e,t=Object.create(null),r={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(e=i.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return(t.__proto__=r,Object.getPrototypeOf(t)===r)?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}())?(2===i.level?i.set?(n=i.set,s=function(e,t){return n.call(o(e,t),t),e}):s=function(e,t){return o(e,t).__proto__=t,e}:s=function e(t,r){var i;return o(t,r),(i=u.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,i&&d(e.nullPolyfill,"__proto__",h),t},Object.defineProperty(s,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null,r(15)},(e,t,r)=>{"use strict";var i=r(12),s={function:!0,object:!0};e.exports=function(e){return i(e)&&s[typeof e]||!1}},(e,t,r)=>{"use strict";var i=r(13)();e.exports=function(e){return e!==i&&null!==e}},e=>{"use strict";e.exports=function(){}},(e,t,r)=>{"use strict";var i=r(12);e.exports=function(e){if(!i(e))throw TypeError("Cannot use null or undefined");return e}},(e,t,r)=>{"use strict";var i,s,n,o,a=Object.create;r(9)()||(o=r(10)),e.exports=o&&1===o.level?(i={},s={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e){s[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}s[e]=n}),Object.defineProperties(i,s),Object.defineProperty(o,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(e,t){return a(null===e?i:e,t)}):a},(e,t,r)=>{"use strict";var i=r(11);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an Object");return e}},e=>{"use strict";var t=Object.create(null),r=Math.random;e.exports=function(){var e;do e=r().toString(36).slice(2);while(t[e]);return e}},(e,t,r)=>{"use strict";var i=r(19),s=r(20),n=r(24),o=r(30),a=r(31);(e.exports=function(e,t){var r,s,l,u,d;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],i(e)?(r=a.call(e,"c"),s=a.call(e,"e"),l=a.call(e,"w")):(r=l=!0,s=!1),d={value:t,configurable:r,enumerable:s,writable:l},u?n(o(u),d):d}).gs=function(e,t,r){var l,u,d,h;return"string"!=typeof e?(d=r,r=t,t=e,e=null):d=arguments[3],i(t)?s(t)?i(r)?s(r)||(d=r,r=void 0):r=void 0:(d=t,t=r=void 0):t=void 0,i(e)?(l=a.call(e,"c"),u=a.call(e,"e")):(l=!0,u=!1),h={get:t,set:r,configurable:l,enumerable:u},d?n(o(d),h):h}},e=>{"use strict";var t=void 0;e.exports=function(e){return e!==t&&null!==e}},(e,t,r)=>{"use strict";var i=r(21),s=/^\s*class[\s{/}]/,n=Function.prototype.toString;e.exports=function(e){return!(!i(e)||s.test(n.call(e)))}},(e,t,r)=>{"use strict";var i=r(22);e.exports=function(e){if("function"!=typeof e||!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length||"function"!=typeof e.call||"function"!=typeof e.apply)return!1}catch(e){return!1}return!i(e)}},(e,t,r)=>{"use strict";var i=r(23);e.exports=function(e){if(!i(e))return!1;try{if(!e.constructor)return!1;return e.constructor.prototype===e}catch(e){return!1}}},(e,t,r)=>{"use strict";var i=r(19),s={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!i(e)&&hasOwnProperty.call(s,typeof e)}},(e,t,r)=>{"use strict";e.exports=r(25)()?Object.assign:r(26)},e=>{"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},(e,t,r)=>{"use strict";var i=r(27),s=r(14),n=Math.max;e.exports=function(e,t){var r,o,a,l=n(arguments.length,2);for(o=1,e=Object(s(e)),a=function(i){try{e[i]=t[i]}catch(e){r||(r=e)}};o<l;++o)t=arguments[o],i(t).forEach(a);if(void 0!==r)throw r;return e}},(e,t,r)=>{"use strict";e.exports=r(28)()?Object.keys:r(29)},e=>{"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},(e,t,r)=>{"use strict";var i=r(12),s=Object.keys;e.exports=function(e){return s(i(e)?Object(e):e)}},(e,t,r)=>{"use strict";var i=r(12),s=Array.prototype.forEach,n=Object.create,o=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=n(null);return s.call(arguments,function(e){i(e)&&o(Object(e),t)}),t}},(e,t,r)=>{"use strict";e.exports=r(32)()?String.prototype.contains:r(33)},e=>{"use strict";var t="razdwatrzy";e.exports=function(){return"function"==typeof t.contains&&!0===t.contains("dwa")&&!1===t.contains("foo")}},e=>{"use strict";var t=String.prototype.indexOf;e.exports=function(e){return t.call(this,e,arguments[1])>-1}},(e,t,r)=>{"use strict";var i=r(35),s=r(36),n=r(37),o=r(72),a=r(73),l=r(38).iterator;e.exports=function(e){return"function"==typeof a(e)[l]?e[l]():i(e)?new n(e):s(e)?new o(e):new n(e)}},e=>{"use strict";var t=Object.prototype.toString,r=t.call(function(){return arguments}());e.exports=function(e){return t.call(e)===r}},e=>{"use strict";var t=Object.prototype.toString,r=t.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||t.call(e)===r)||!1}},(e,t,r)=>{"use strict";var i,s=r(8),n=r(31),o=r(18),a=r(38),l=r(49),u=Object.defineProperty;i=e.exports=function(e,t){if(!(this instanceof i))throw TypeError("Constructor requires 'new'");l.call(this,e),u(this,"__kind__",o("",t=t?n.call(t,"key+value")?"key+value":n.call(t,"key")?"key":"value":"value"))},s&&s(i,l),delete i.prototype.constructor,i.prototype=Object.create(l.prototype,{_resolve:o(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(i.prototype,a.toStringTag,o("c","Array Iterator"))},(e,t,r)=>{"use strict";e.exports=r(39)()?r(40).Symbol:r(43)},(e,t,r)=>{"use strict";var i=r(40),s={object:!0,symbol:!0};e.exports=function(){var e,t=i.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!s[typeof t.iterator]&&!!s[typeof t.toPrimitive]&&!!s[typeof t.toStringTag]}},(e,t,r)=>{"use strict";e.exports=r(41)()?globalThis:r(42)},e=>{"use strict";e.exports=function(){return!!("object"==typeof globalThis&&globalThis)&&globalThis.Array===Array}},e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{if(!__global__)return t();return __global__}finally{delete Object.prototype.__global__}}()},(e,t,r)=>{"use strict";var i,s,n,o=r(18),a=r(44),l=r(40).Symbol,u=r(46),d=r(47),h=r(48),c=Object.create,_=Object.defineProperties,g=Object.defineProperty;if("function"==typeof l)try{String(l()),n=!0}catch(e){}else l=null;s=function(e){if(this instanceof s)throw TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){if(this instanceof e)throw TypeError("Symbol is not a constructor");return n?l(t):_(c(s.prototype),{__description__:o("",t=void 0===t?"":String(t)),__name__:o("",u(t))})},d(i),h(i),_(s.prototype,{constructor:o(i),toString:o("",function(){return this.__name__})}),_(i.prototype,{toString:o(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:o(function(){return a(this)})}),g(i.prototype,i.toPrimitive,o("",function(){var e=a(this);return"symbol"==typeof e?e:e.toString()})),g(i.prototype,i.toStringTag,o("c","Symbol")),g(s.prototype,i.toStringTag,o("c",i.prototype[i.toStringTag])),g(s.prototype,i.toPrimitive,o("c",i.prototype[i.toPrimitive]))},(e,t,r)=>{"use strict";var i=r(45);e.exports=function(e){if(!i(e))throw TypeError(e+" is not a symbol");return e}},e=>{"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},(e,t,r)=>{"use strict";var i=r(18),s=Object.defineProperty,n=Object.prototype,o=(0,Object.create)(null);e.exports=function(e){for(var t,r,a=0;o[e+(a||"")];)++a;return o[e+=a||""]=!0,s(n,t="@@"+e,i.gs(null,function(e){r||(r=!0,s(this,t,i(e)),r=!1)})),t}},(e,t,r)=>{"use strict";var i=r(18),s=r(40).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:i("",s&&s.hasInstance||e("hasInstance")),isConcatSpreadable:i("",s&&s.isConcatSpreadable||e("isConcatSpreadable")),iterator:i("",s&&s.iterator||e("iterator")),match:i("",s&&s.match||e("match")),replace:i("",s&&s.replace||e("replace")),search:i("",s&&s.search||e("search")),species:i("",s&&s.species||e("species")),split:i("",s&&s.split||e("split")),toPrimitive:i("",s&&s.toPrimitive||e("toPrimitive")),toStringTag:i("",s&&s.toStringTag||e("toStringTag")),unscopables:i("",s&&s.unscopables||e("unscopables"))})}},(e,t,r)=>{"use strict";var i=r(18),s=r(44),n=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:i(function(t){return n[t]?n[t]:n[t]=e(String(t))}),keyFor:i(function(e){var t;for(t in s(e),n)if(n[t]===e)return t})})}},(e,t,r)=>{"use strict";var i,s=r(50),n=r(24),o=r(51),a=r(14),l=r(18),u=r(52),d=r(38),h=Object.defineProperty,c=Object.defineProperties;e.exports=i=function(e,t){if(!(this instanceof i))throw TypeError("Constructor requires 'new'");c(this,{__list__:l("w",a(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(o(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete i.prototype.constructor,c(i.prototype,n({_next:l(function(){var e;if(this.__list__){if(this.__redo__&&void 0!==(e=this.__redo__.shift()))return e;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:l(function(e){return this.__list__[e]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[d.toStringTag]||"Object")+"]"})},u({_onAdd:l(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){h(this,"__redo__",l("c",[e]));return}this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:l(function(e){var t;!(e>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,r){t>e&&(this.__redo__[r]=--t)},this)))}),_onClear:l(function(){this.__redo__&&s.call(this.__redo__),this.__nextIndex__=0})}))),h(i.prototype,d.iterator,l(function(){return this}))},(e,t,r)=>{"use strict";var i=r(14);e.exports=function(){return i(this).length=0,this}},e=>{"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function");return e}},(e,t,r)=>{"use strict";var i,s=r(19),n=r(53),o=r(58),a=r(59),l=r(30),u=r(69),d=Function.prototype.bind,h=Object.defineProperty,c=Object.prototype.hasOwnProperty;i=function(e,t,r){var i,s=n(t)&&o(t.value);return i=a(t),delete i.writable,delete i.value,i.get=function(){return!r.overwriteDefinition&&c.call(this,e)?s:(t.value=d.call(s,r.resolveContext?r.resolveContext(this):this),h(this,e,t),this[e])},i},e.exports=function(e){var t=l(arguments[1]);return s(t.resolveContext)&&o(t.resolveContext),u(e,function(e,r){return i(r,e,t)})}},(e,t,r)=>{"use strict";var i=r(54),s=r(19);e.exports=function(e){return s(e)?e:i(e,"Cannot use %v",arguments[1])}},(e,t,r)=>{"use strict";var i=r(19),s=r(23),n=r(55),o=r(56),a=function(e,t){return e.replace("%v",o(t))};e.exports=function(e,t,r){if(!s(r))throw TypeError(a(t,e));if(!i(e)){if("default"in r)return r.default;if(r.isOptional)return null}var o=n(r.errorMessage);throw i(o)||(o=t),TypeError(a(o,e))}},(e,t,r)=>{"use strict";var i=r(19),s=r(23),n=Object.prototype.toString;e.exports=function(e){if(!i(e))return null;if(s(e)){var t=e.toString;if("function"!=typeof t||t===n)return null}try{return""+e}catch(e){return null}}},(e,t,r)=>{"use strict";var i=r(57),s=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=i(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"…"),t=t.replace(s,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("Unexpected character")}}))}},e=>{"use strict";e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(e){return null}}}},(e,t,r)=>{"use strict";var i=r(54),s=r(20);e.exports=function(e){return s(e)?e:i(e,"%v is not a plain function",arguments[1])}},(e,t,r)=>{"use strict";var i=r(60),s=r(24),n=r(14);e.exports=function(e){var t=Object(n(e)),r=arguments[1],o=Object(arguments[2]);if(t!==e&&!r)return t;var a={};return r?i(r,function(t){(o.ensure||t in e)&&(a[t]=e[t])}):s(a,e),a}},(e,t,r)=>{"use strict";e.exports=r(61)()?Array.from:r(62)},e=>{"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&!!((t=r(e=["raz","dwa"]))&&t!==e&&"dwa"===t[1])}},(e,t,r)=>{"use strict";var i=r(38).iterator,s=r(35),n=r(63),o=r(64),a=r(51),l=r(14),u=r(12),d=r(36),h=Array.isArray,c=Function.prototype.call,_={configurable:!0,enumerable:!0,writable:!0,value:null},g=Object.defineProperty;e.exports=function(e){var t,r,p,f,y,b,v,E,m,k,P=arguments[1],S=arguments[2];if(e=Object(l(e)),u(P)&&a(P),this&&this!==Array&&n(this))t=this;else{if(!P){if(s(e))return 1!==(y=e.length)?Array.apply(null,e):((f=[,])[0]=e[0],f);if(h(e)){for(r=0,f=Array(y=e.length);r<y;++r)f[r]=e[r];return f}}f=[]}if(!h(e)){if(void 0!==(m=e[i])){for(v=a(m).call(e),t&&(f=new t),E=v.next(),r=0;!E.done;)k=P?c.call(P,S,E.value,r):E.value,t?(_.value=k,g(f,r,_)):f[r]=k,E=v.next(),++r;y=r}else if(d(e)){for(y=e.length,t&&(f=new t),r=0,p=0;r<y;++r)k=e[r],r+1<y&&(b=k.charCodeAt(0))>=55296&&b<=56319&&(k+=e[++r]),k=P?c.call(P,S,k,p):k,t?(_.value=k,g(f,p,_)):f[p]=k,++p;y=p}}if(void 0===y)for(y=o(e.length),t&&(f=new t(y)),r=0;r<y;++r)k=P?c.call(P,S,e[r],r):e[r],t?(_.value=k,g(f,r,_)):f[r]=k;return t&&(_.value=null,f.length=y),f}},e=>{"use strict";var t=Object.prototype.toString,r=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&r(t.call(e))}},(e,t,r)=>{"use strict";var i=r(65),s=Math.max;e.exports=function(e){return s(0,i(e))}},(e,t,r)=>{"use strict";var i=r(66),s=Math.abs,n=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?i(e)*n(s(e)):e}},(e,t,r)=>{"use strict";e.exports=r(67)()?Math.sign:r(68)},e=>{"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},e=>{"use strict";e.exports=function(e){return isNaN(e=Number(e))||0===e?e:e>0?1:-1}},(e,t,r)=>{"use strict";var i=r(51),s=r(70),n=Function.prototype.call;e.exports=function(e,t){var r={},o=arguments[2];return i(t),s(e,function(e,i,s,a){r[i]=n.call(t,o,e,i,s,a)}),r}},(e,t,r)=>{"use strict";e.exports=r(71)("forEach")},(e,t,r)=>{"use strict";var i=r(51),s=r(14),n=Function.prototype.bind,o=Function.prototype.call,a=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,u){var d,h=arguments[2],c=arguments[3];return r=Object(s(r)),i(u),d=a(r),c&&d.sort("function"==typeof c?n.call(c,r):void 0),"function"!=typeof e&&(e=d[e]),o.call(e,d,function(e,i){return l.call(r,e)?o.call(u,h,r[e],e,r,i):t})}}},(e,t,r)=>{"use strict";var i,s=r(8),n=r(18),o=r(38),a=r(49),l=Object.defineProperty;i=e.exports=function(e){if(!(this instanceof i))throw TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),l(this,"__length__",n("",e.length))},s&&s(i,a),delete i.prototype.constructor,i.prototype=Object.create(a.prototype,{_next:n(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:n(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0))>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r})}),l(i.prototype,o.toStringTag,n("c","String Iterator"))},(e,t,r)=>{"use strict";var i=r(74);e.exports=function(e){if(!i(e))throw TypeError(e+" is not iterable");return e}},(e,t,r)=>{"use strict";var i=r(35),s=r(12),n=r(36),o=r(38).iterator,a=Array.isArray;e.exports=function(e){return!!s(e)&&(!!(a(e)||n(e)||i(e))||"function"==typeof e[o])}},(e,t,r)=>{"use strict";var i=r(35),s=r(51),n=r(36),o=r(34),a=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;e.exports=function(e,t){var r,d,h,c,_,g,p,f,y=arguments[2];if(a(e)||i(e)?r="array":n(e)?r="string":e=o(e),s(t),h=function(){c=!0},"array"===r){u.call(e,function(e){return l.call(t,y,e,h),c});return}if("string"===r){for(_=0,g=e.length;_<g&&(p=e[_],_+1<g&&(f=p.charCodeAt(0))>=55296&&f<=56319&&(p+=e[++_]),l.call(t,y,p,h),!c);++_);return}for(d=e.next();!d.done;){if(l.call(t,y,d.value,h),c)return;d=e.next()}}},e=>{"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)}],t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";r.r(i),r.d(i,{AlwaysAllowSeekStrategy:()=>et,BasePlayer:()=>er,NeverAllowSeekStrategy:()=>ey,ProxyPlayer:()=>eo,ProxyPlayerBase:()=>en,State:()=>y,StateManager:()=>J,TimeRange:()=>ef,buildNumber:()=>ev,errors:()=>b,eventDispatcher:()=>m,helpers:()=>E,loader:()=>k,loaderErrors:()=>v,logger:()=>P,version:()=>eb});let e=Date.now();function t(){return"performance"in window&&window.performance.now?window.performance.now():Date.now()-e}class s{constructor(){this._listeners=[],this.dispatch=this.dispatch.bind(this)}subscribe(e){let t={fn:e,payloads:[]};return this._listeners.push(t),{remove:()=>{let e=this._listeners.indexOf(t);return e>=0&&(this._listeners.splice(e,1),!0)},retrieve:()=>this._dispatchListenerPayloads(t)}}dispatch(e,r){let i="number"==typeof r?{time:r}:r||{},s=void 0!==i.time?i.time:t(),n=this._listeners;n.forEach(t=>t.payloads.push({time:s,payload:e}));let o=!1;do o=!n.some(({fn:e,payloads:t})=>{let r=t.shift();return!!r&&(this._callHandler(e,r),!0)});while(!o)}getHandle(){return{subscribe:this.subscribe.bind(this)}}_dispatchListenerPayloads({fn:e,payloads:t}){for(;;){let r=t.shift();if(!r)break;this._callHandler(e,r)}}_callHandler(e,t){try{e(t.payload,t.time)}catch(e){window.setTimeout(()=>{throw e},0)}}}var n,o,a,l,u,d,h,c,_,g,p,f,y,b,v,E,m,k,P,S=r(1);function w(){let e,t;let r=!1;return{promise:new S.Promise((r,i)=>{e=r,t=i}),resolve(t){r||(r=!0,e(t))},reject(e){r||(r=!0,t(e))},isSettled:()=>r}}function R(e,t){return e.then(t,t)}function D(e){try{e()}catch(e){window.setTimeout(()=>{throw e},0)}}let O=Error("Job aborted.");class x{constructor(e,t={}){this._job=e,this._opts=t,this._counter=0,this._jobControl=null,this._promise=null,this._jobCompleted=!1}run(){let e,t;if(this._jobControl)e=this._jobControl;else{try{e=this._jobControl=this._job()}catch(t){e=this._jobControl={result:S.Promise.reject(t)}}this._promise=e.result,R(this._promise,()=>{this._jobCompleted=!0,this._opts.storeResult||(this._jobCompleted=!1,this._promise=null,this._jobControl=null)})}let r=this._promise;this._counter++;let i=w(),s=!1,n=!1,o=!1,a=[],l=[],u=[];return R(r,()=>{!o&&(s=!0,this._counter--),a.forEach(e=>e.remove())}),r.then(e=>{o||(t=e,l.forEach(t=>D(()=>t(e))),l.splice(0),i.resolve(e))},e=>{o||(n=!0,t=e,u.forEach(t=>t(e)),u.splice(0),i.reject(e))}),{whenComplete:()=>i.promise,onProgressUpdate:(t,r={})=>{if(e.progressUpdates){if(!o&&!s){let r=e.progressUpdates.onProgressUpdate.subscribe(e=>t(e));a.push(r)}if(!r.skipPast){let r=e.progressUpdates.getProgressSoFar();r&&t(r)}}},getProgressSoFar:()=>e.progressUpdates?e.progressUpdates.getProgressSoFar():null,onCompletion:e=>{s?n||D(()=>e(t)):l.push(e)},onError:e=>{o?D(()=>e(O)):s?n&&D(()=>e(t)):u.push(e)},hasCompleted:()=>s,hasErrored:()=>n,isAborted:()=>o,abort:()=>{o||s||(o=!0,a.forEach(e=>e.remove()),0==--this._counter&&!this._jobCompleted&&this._jobControl&&this._jobControl.abort&&(this._jobControl.abort(),this._promise=null,this._jobControl=null),u.forEach(e=>D(()=>e(O))),i.reject(O))}}}}(n=f||(f={}))[n.PENDING=0]="PENDING",n[n.WAITING=1]="WAITING",n[n.IN_PROGRESS=2]="IN_PROGRESS",n[n.COMPLETED=3]="COMPLETED",n[n.ERRORED=4]="ERRORED";class A{constructor(){this._responseDeferred=w(),this._requestStartCallbacks=[],this._parts=[],this._progressEventDispatcher=new s,this._cachedCompleteParts=null,this._state=f.PENDING,this._statusAndHeaders=null,this._getProgressSoFar=()=>{if(!this._parts.length)return null;if(!this._statusAndHeaders)throw Error("Headers should be set.");return{initial:!0,statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,part:this._getDataSoFar()}};let e=new x(()=>({result:this._responseDeferred.promise,progressUpdates:{getProgressSoFar:this._getProgressSoFar,onProgressUpdate:this._progressEventDispatcher}}),{storeResult:!0});this._jobHandle=e.run()}onProgress(e){this._jobHandle.onProgressUpdate(e)}getResponse(){return this._jobHandle.whenComplete()}onRequestStart(e){this._state!==f.PENDING?D(e):this._requestStartCallbacks.push(e)}onResponseReceived(e){this._jobHandle.onCompletion(e)}onError(e){this._jobHandle.onError(e)}hasRequestStarted(){return this._state!==f.PENDING}hasCompleted(){return this._state===f.COMPLETED||this._state===f.ERRORED}getState(){return this._state}abort(){-1===[f.ERRORED,f.COMPLETED].indexOf(this._state)&&(this._jobHandle.abort(),this._state=f.ERRORED,this._abort())}_signalRequestStart(){this._enforceState(f.PENDING),this._state=f.WAITING,this._requestStartCallbacks.splice(0).forEach(e=>D(e))}_signalTimeout(){this._enforceState(f.WAITING,f.IN_PROGRESS),this._state=f.COMPLETED,this._requestStartCallbacks.splice(0),this._responseDeferred.resolve(null)}_provideStatusAndHeaders(e,t){this._enforceState(f.WAITING),this._statusAndHeaders=e,this._state=f.IN_PROGRESS,this._providePart(t)}_providePart(e){this._enforceState(f.IN_PROGRESS);let t=!this._parts.length;if(this._parts.push(e),!this._statusAndHeaders)throw Error("Headers should be set.");this._progressEventDispatcher.dispatch({initial:t,statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,part:e})}_finalize(e){if(e)this._enforceState(f.PENDING,f.WAITING,f.IN_PROGRESS),this._state=f.ERRORED,this._requestStartCallbacks.splice(0),this._responseDeferred.reject(e);else{if(this._enforceState(f.IN_PROGRESS),this._state=f.COMPLETED,!this._statusAndHeaders)throw Error("Headers should be set.");this._responseDeferred.resolve({statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,getData:()=>{if(!this._parts.length)throw Error("Unexpected error. No parts.");return this._cachedCompleteParts?this._cachedCompleteParts:this._cachedCompleteParts=this._getDataSoFar()}})}}_getDataSoFar(){let e=this._parts.length;if(!e)throw Error("No parts.");return 1===e?this._parts[0]:this._reduceParts(this._parts)}_enforceState(...e){if(-1===e.indexOf(this._state))throw Error(`Invalid state. Got ${this._state} Expecting one of ${e.join(",")}`)}}let j="undefined"!=typeof navigator?navigator.userAgent:"",F=!/chrome|opera/i.test(j)&&/safari/i.test(j),C=j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0,M=j.indexOf("Edge/")>=0,T=/Chrom(?:e|ium)/.test(j),I=j.toLowerCase().indexOf("firefox")>=0,N=/version\/(\d+)\.(\d+)/i,L=/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)/,H=/Firefox\/(\d+)\.(\d+)/;function U(e){let t="undefined"!=typeof navigator?navigator.userAgent.match(e):null;if(t&&t.length>=3){let e=parseInt(t[1],10),r=parseInt(t[2],10);if(!isNaN(e)&&!isNaN(r))return{major:e,minor:r}}return null}function q(e,t){return{debug:(r,...i)=>e.debug(`[${t}] ${r}`,...i),error:(r,...i)=>e.error(`[${t}] ${r}`,...i),info:(r,...i)=>e.info(`[${t}] ${r}`,...i),warn:(r,...i)=>e.warn(`[${t}] ${r}`,...i)}}class G extends Error{constructor(e,t){super(e),this._msg=e,this._cause=t}getCode(){return"PLAYER_ERROR"}getMsg(){return this._msg}getCause(){return this._cause}}class B extends G{getCode(){return"PLAYER_FATAL_ERROR"}}class W extends B{constructor(e){super(e||"The player cannot play the provided descriptor.")}getCode(){return"NOT_SUPPORTED_ERROR"}}function z(e,t){let r;return e.some(e=>!!t(e)&&(r=e,!0)),r}(o=y||(y={}))[o.LOADING=0]="LOADING",o[o.PLAYING=1]="PLAYING",o[o.PAUSED=2]="PAUSED",o[o.DEAD=3]="DEAD";class V{constructor(e,t){this._inCallback=!1,this._onExit=e,this._onEnter=t||null}enter(e){if(this._inCallback)return e?e(this._onEnterResultRetriever):void 0;this._inCallback=!0;let t=[],r=!1;this._onEnter&&(this._onEnterResultRetriever={getResult:e=>{r?D(()=>e(this._onEnterError,this._onEnterResult)):t.push(e)}});try{let i=e?e(this._onEnterResultRetriever):void 0;if(this._onEnter){this._onEnterError=void 0,this._onEnterResult=void 0;try{this._onEnterResult=this._onEnter()}catch(e){this._onEnterError=e}r=!0,t.forEach(e=>D(()=>e(this._onEnterError,this._onEnterResult)))}return i}finally{this._inCallback=!1,D(()=>this._onExit(this._onEnterError,this._onEnterResult))}}}function Y(e){let t=Object.create(null);return Object.keys(e).forEach(r=>{t[r]=e[r]}),t}let $=()=>{};class J{constructor(e,t={}){this._subscribers=[],this._onExit=new V(()=>this._after(),()=>this._onEnter()),this._beforeUpdateError=void 0,this._inAfterUpdate=!1,this._dead=!1,this._officiallyDead=!1,this._errors=[],this._state=Y(e),this._initialState=Y(e),this._beforeUpdate=t.beforeUpdate||(()=>void 0),this._afterUpdate=t.afterUpdate||$,this._afterDispatches=t.afterDispatches||$}subscribe(e,t=!0){if(this._dead){let e=!1;return{retrieve:()=>{},remove:()=>!e&&(e=!0)}}let r={callback:e,localState:t?Y(this._state):this._initialState};return this._subscribers.push(r),t||this._updateSubscriber(r),{remove:()=>{let t=this._subscribers.map(e=>e.callback).indexOf(e);return t>=0&&(this._subscribers.splice(t,1),!0)},retrieve:()=>{this._updateSubscriber(r)}}}subscribeIndividual(e,t,r){return this.subscribe(r=>{let i=r[e];void 0!==i&&t(i)},r)}getHandle(){return{subscribe:this.subscribe.bind(this)}}getIndividualHandle(e){return{subscribe:t=>this.subscribeIndividual(e,t)}}update(e){!this._officiallyDead&&(this._inAfterUpdate?e&&e(this._state,this._beforeUpdateError):this._onExit.enter(t=>{t.getResult(()=>{try{e&&e(this._state,this._beforeUpdateError)}catch(e){this._errors.push(e)}})}))}getState(){return this._state}kill(){this._dead||(this._dead=!0,window.setTimeout(()=>{this._subscribers.splice(0),this._officiallyDead=!0},0))}isDead(){return this._dead}_onEnter(){this._beforeUpdateError=void 0;try{this._beforeUpdate(this._state)}catch(e){this._beforeUpdateError=e}}_after(){let e=this._errors;this._errors=[],D(()=>{this._inAfterUpdate=!0;try{this._afterUpdate(this._state,{beforeUpdate:this._beforeUpdateError,update:e})}catch(e){throw this._inAfterUpdate=!1,e}this._inAfterUpdate=!1,this._subscribers.slice().forEach(e=>this._updateSubscriber(e)),this._afterDispatches(this._state)})}_updateSubscriber(e){let t=this._calculateDiff(e.localState);Object.keys(t).length&&(e.localState=Y(this._state),D(()=>e.callback(t,e.localState)))}_calculateDiff(e){let t=Object.create(null);return Object.keys(this._state).forEach(r=>{let i=this._state[r];i!==e[r]&&(t[r]=i)}),t}}class Q extends B{constructor(e,t){super(e,t)}getCode(){return"IMPLEMENTATION_ERROR"}}let K="undefined"!=typeof navigator&&"mediaSession"in navigator?navigator.mediaSession:null;class X{constructor(e){this._mediaSession=e,this._stack=[],this._active=null}register(e){if(!this._mediaSession)return{remove:()=>{}};this._stack.length?this._stack.splice(1,0,e):(this._stack.push(e),this._makeActive(e));let t=e.getPlayer().onChange.subscribe(({playing:t})=>{void 0!==t&&this._handleUpdate(e)});this._handleUpdate(e);let r=!1;return{remove:()=>{if(r)return;r=!0,t.remove();let i=this._stack.indexOf(e);i>=0&&this._stack.splice(i,1),this._stack.length?this._makeActive(this._stack[0]):(this._active=null,this._updateHandlers({}),this._mediaSession.playbackState="none")}}}_handleUpdate(e){let t=e.getPlayer().isPlaying();t&&this._makeActive(e),this._isActive(e)&&(this._mediaSession.playbackState=t?"playing":"paused")}_isActive(e){return this._active===e}_makeActive(e){if(this._isActive(e))return;let t=this._stack.indexOf(e);t>=0&&this._stack.splice(t,1),this._stack.unshift(e),this._active=e,this._updateHandlers(e.getHandlers())}_updateHandlers(e){this._mediaSession.setActionHandler("play",e.play||null),this._mediaSession.setActionHandler("pause",e.pause||null),this._mediaSession.setActionHandler("seekforward",e.seekForward||null),this._mediaSession.setActionHandler("seekbackward",e.seekBackward||null)}}let Z=new X(K);class ee{constructor(e,t={}){this._player=e,this._handlers=t}getHandlers(){return this._handlers}getPlayer(){return this._player}}let et={isSeekAllowed:()=>!0};class er{constructor(e){this._stateManager=new J({ended:!1,loading:!1,playing:!1,actuallyPlaying:!1,volume:1,muted:!1,isFading:!1,fadeRate:null,isFadingForSeek:!1,playDeferred:null,pauseDeferred:null,ready:!1,seeking:!1,seek:null,seekBlockedError:null,positionJumped:null,stalled:!0,duration:null,dead:!1,state:y.PAUSED,fatalError:null,errorOccurred:null,position:0},{afterUpdate:(e,t)=>this._afterUpdate(e,t),afterDispatches:()=>this._afterDispatches(),beforeUpdate:e=>{if(!e.dead&&(e.ready||!this._fatalErrorTriggered)){let t=this._getPosition(),r=e.duration;if(t<0)throw this._logger.error("Player provided invalid position.",t,r),this._triggerError(new Q("Player provided a position that was invalid.")),Error("Player provided invalid position.");e.position=t,this._updateEndedInState(e)}}}),this._onError=new s,this._errors=[],this._fatalErrorTriggered=!1,this._loadingDelayTimer=null,this._stalled=!1,this._queuedDuration=null,this._readyDeferred=w(),this._queuedSeekDeferreds=[],this._lastPlayError=null,this._lastPauseError=null,this._lastPlayedPosition=null,this._listenTimeBase=0,this._timePlaybackStarted=null,this._positionAfterLastUpdate=0,this._positionWhenStartedFadeOut=null,this._fadeStartAllowed=!1,this._seekFadeStartAllowed=!1,this._implementationIsFading=!1,this._mediaSessionManagerHandle=null,this._activeSeek=null,this._activeSeekPositionJumped=null;let t=e.name;if(this._logger=q(e.logger,"BasePlayer"+(t?`-${t}`:"")),this._mediaSessionEnabled=!!e.mediaSessionEnabled,e.defaultFadeDuration&&e.defaultFadeDuration<0)throw Error("defaultFadeDuration must be >= 0.");if(e.loadingDelay&&e.loadingDelay<0)throw Error("loadingDelay must be >= 0.");this._defaultFadeDuration=void 0!==e.defaultFadeDuration?e.defaultFadeDuration:150,this._defaultSeekFadeOutDuration=void 0!==e.defaultSeekFadeOutDuration?e.defaultSeekFadeOutDuration:25,this._defaultSeekFadeInDuration=void 0!==e.defaultSeekFadeInDuration?e.defaultSeekFadeInDuration:35,this._loadingDelay=void 0!==e.loadingDelay?e.loadingDelay:1e3,this._seekStrategy=void 0!==e.seekStrategy?e.seekStrategy:et,this.onError=this._onError.getHandle(),this.whenReady=this._readyDeferred.promise,this._configureRewindAfterFadeOut(),this._stateManager.subscribe((e,t)=>this._onChange(e,t)),this._stateManager.subscribe(({actuallyPlaying:e,seek:t})=>{!0===e&&(this._fadeStartAllowed=!1),t&&"IN_PROGRESS"!==t.state&&(this._seekFadeStartAllowed=!1)}),this._stateManager.subscribe(({isFading:e},{dead:t})=>{!t&&!1===e&&this._implementationIsFading&&this._triggerError(new Q("Fade was still running when not allowed."))}),this._stateManager.subscribe(({playing:e},{dead:t,fadeRate:r})=>{t||void 0===e||this._stateManager.update(()=>{try{this._handlePlayPauseChange(e,{fadeRate:r||void 0}),e||(this._fadeStartAllowed=!1)}catch(e){this._triggerError(new Q("Exception occurred whilst handling play/pause change.",e))}})}),this._stateManager.subscribe(({seek:e},{dead:t})=>{!t&&e&&e!==this._activeSeek&&"IN_PROGRESS"===e.state&&this._stateManager.update(()=>{try{this._seekFadeStartAllowed=!0,this._handleSeekChange(e.position,{fadeRate:{beforeSeek:e.fadeRate.beforeSeek||void 0,afterSeek:e.fadeRate.afterSeek||void 0}}),this._seekFadeStartAllowed=!1}catch(e){this._triggerError(new Q("Exception occurred whilst handling seek change.",e))}})}),this._stateManager.subscribe(({seek:e,seekBlockedError:t,positionJumped:r},i)=>{e&&(this._activeSeek=e),r&&(this._activeSeekPositionJumped=r),this._queuedSeekDeferreds=this._queuedSeekDeferreds.filter(({position:e,active:r,deferred:s})=>{if(t&&!r)return this._logger.debug("Rejecting seek() because it was blocked.",t),s.reject(t),!1;if(i.seek&&"ERROR"===i.seek.state)return this._logger.debug("Rejecting seek().",i.seek.error),s.reject(i.seek.error),!1;if(i.seek&&"COMPLETED"===i.seek.state)return!!i.stalled||(this._logger.debug("Resolving seek()."),s.resolve(),!1);if(i.seek&&"IN_PROGRESS"===i.seek.state)return e===i.seek.position||(this._logger.debug("Rejecting seek() because another seek was requested.",e),s.reject(Error("Seek request aborted because another seek was requested to a different position.")),!1);throw this._triggerError(new Q("Unexpected error handling seek deferreds.")),Error("Unexpected error handling seek deferreds.")}),this._queuedSeekDeferreds.forEach(e=>e.active=!0)}),this.onChange=this._buildEventHandle((e,t)=>{let r=t.ready;if(void 0!==r&&!0!==r)throw Error("Ready state is invalid.");let i=t.duration;if(void 0!==i&&null===i)throw Error("Duration state is invalid.");let s=t.dead;if(void 0!==s&&!0!==s)throw Error("Dead state is invalid.");let n={ready:r,ended:t.ended,duration:i,volume:t.volume,muted:t.muted,playing:t.playing,actuallyPlaying:t.actuallyPlaying,stalled:t.stalled,loading:t.loading,fading:t.isFading,fadingForSeek:t.isFadingForSeek,playRejection:!1===t.playing&&this._lastPlayError||void 0,pauseRejection:!0===t.playing&&this._lastPauseError||void 0,seeking:t.seeking,seek:t.seek||void 0,seekBlockedError:t.seekBlockedError||void 0,positionJumped:void 0!==t.positionJumped||void 0,state:t.state,fatalError:t.fatalError||void 0,dead:s};Object.keys(n).some(e=>void 0!==n[e])&&e(n)});let r=e.registerListeners;r&&D(()=>{r({onChange:this.onChange,onError:this.onError})}),this.onDurationChange=this._buildEventHandle((e,{duration:t})=>{null!=t&&e(t)}),this.onReady=this._buildEventHandle((e,{ready:t})=>{!0===t&&e(void 0)}),this.onStateChange=this._buildEventHandle((e,{state:t})=>{void 0!==t&&e(t)}),this.onVolumeChange=this._buildEventHandle((e,{volume:t,muted:r},{volume:i,muted:s})=>{(void 0!==t||void 0!==r)&&e({volume:i,muted:s})}),this.onPlay=this._buildEventHandle((e,{actuallyPlaying:t})=>{!0===t&&e(void 0)}),this.onPlayIntent=this._buildEventHandle((e,{playing:t})=>{!0===t&&e(void 0)}),this.onPlayRejection=this._buildEventHandle((e,{playing:t})=>{!1===t&&this._lastPlayError&&e(this._lastPlayError)}),this.onPause=this._buildEventHandle((e,{actuallyPlaying:t})=>{!1===t&&e(void 0)}),this.onPauseIntent=this._buildEventHandle((e,{playing:t})=>{!1===t&&e(void 0)}),this.onPauseRejection=this._buildEventHandle((e,{playing:t})=>{!0===t&&this._lastPauseError&&e(this._lastPauseError)}),this.onSeek=this._buildEventHandle((e,{seek:t})=>{t&&"COMPLETED"===t.state&&e(void 0)}),this.onSeekIntent=this._buildEventHandle((e,{seeking:t})=>{!0===t&&e(void 0)}),this.onSeekRejection=this._buildEventHandle((e,{seek:t})=>{t&&"ERROR"===t.state&&e(t.error)}),this.onPositionJumped=this._buildEventHandle((e,{positionJumped:t})=>{void 0!==t&&e(void 0)}),this.onEnded=this._buildEventHandle((e,{ended:t})=>{!0===t&&e(void 0)}),this.onLeftEnded=this._buildEventHandle((e,{ended:t})=>{!1===t&&e(void 0)}),this.onStallStart=this._buildEventHandle((e,{stalled:t})=>{!0===t&&e(void 0)}),this.onStallEnd=this._buildEventHandle((e,{stalled:t})=>{!1===t&&e(void 0)}),this.onLoadStart=this._buildEventHandle((e,{loading:t})=>{!0===t&&e(void 0)}),this.onLoadEnd=this._buildEventHandle((e,{loading:t})=>{!1===t&&e(void 0)}),this.onFadeStart=this._buildEventHandle((e,{isFading:t})=>{!0===t&&e(void 0)}),this.onFadeEnd=this._buildEventHandle((e,{isFading:t})=>{!1===t&&e(void 0)}),this.onFadeForSeekStart=this._buildEventHandle((e,{isFadingForSeek:t})=>{!0===t&&e(void 0)}),this.onFadeForSeekEnd=this._buildEventHandle((e,{isFadingForSeek:t})=>{!1===t&&e(void 0)})}isReady(){return this._stateManager.getState().ready}getPosition(){return this._getPositionOrPositionSeekingTo()}getLastPlayedPosition(){let{actuallyPlaying:e,stalled:t}=this._stateManager.getState();return e&&!t?this.getPosition():this._lastPlayedPosition}getListenTime(){let{actuallyPlaying:e,ended:r}=this._stateManager.getState(),i=this._listenTimeBase;return e&&!r&&(i+=t()-this._timePlaybackStarted),i}isStalled(){return this._stateManager.getState().stalled}isLoading(){return this._stateManager.getState().loading}isFading(){return this._stateManager.getState().isFading}isFadingForSeek(){return this._stateManager.getState().isFadingForSeek}isPlaying(){return this._stateManager.getState().playing}isActuallyPlaying(){return this._stateManager.getState().actuallyPlaying}isEnded(){return this._stateManager.getState().ended}getState(){return this._stateManager.getState().state}getBufferController(){return null}getMemoryCacheMaxSize(){return null}getMemoryCacheUsage(){return null}getMemoryCacheController(){return null}getFatalError(){return this._stateManager.getState().fatalError}isDead(){return this._stateManager.getState().dead}getVolume(){return this._stateManager.getState().volume}getMuted(){return this._stateManager.getState().muted}getDuration(){let{ready:e,duration:t}=this._stateManager.getState();return e?t:null}setVolume(e,t){if(e<0||e>1)throw Error("Volume must be >= 0 and <= 1.");if(this._stateManager.getState().dead)return;let r=this._stateManager.getState().muted;void 0===t&&(t=r);try{this._handleVolumeChange(e,t)}catch(e){throw this._triggerError(new Q("Exception occurred updating volume.",e)),e}}setMuted(e){this.setVolume(this._stateManager.getState().volume,e)}getCurrentBufferedTimeRange(){let e=this.getBufferedTimeRanges();if(!e)return null;let t=this.getPosition();return z(e,e=>e.containsTime(t))||null}play(e){this._ensureNotDead(),this._logger.debug("play() called.",e);let t=w();try{return this._stateManager.update(r=>{if(r.playing)this._logger.debug("Intent is already to be playing.");else{this._logger.debug("Requesting play."),r.playing=!0;let t=this._extractFadeDuration(e);t?r.fadeRate=1/t:r.fadeRate=null,this._lastPlayError=null}(!r.playDeferred||r.playDeferred.isSettled())&&(r.playDeferred=w()),t.resolve(r.playDeferred.promise)}),t.promise}catch(e){return this._triggerError(new B("Unexpected error when attempting to play.",e)),S.Promise.reject(e)}}pause(e){this._ensureNotDead(),this._logger.debug("pause() called.",e);let t=w();try{return this._stateManager.update(r=>{if(r.playing){this._logger.debug("Requesting pause."),this._positionWhenStartedFadeOut=this._getPositionOrPositionSeekingTo(),r.playing=!1;let t=this._extractFadeDuration(e);t?r.fadeRate=-(1/t*1):r.fadeRate=null,this._fadeStartAllowed=!0,this._lastPauseError=null}else this._logger.debug("Intent is already to be paused.");(!r.pauseDeferred||r.pauseDeferred.isSettled())&&(r.pauseDeferred=w()),t.resolve(r.pauseDeferred.promise)}),t.promise}catch(e){return this._triggerError(new B("Unexpected error when attempting to pause.",e)),S.Promise.reject(e)}}seek(e,t){return this._seek(e,!1,t)}getSeekState(){return this._stateManager.getState().seek}registerMediaSessionActionHandlers(e={play:!0,pause:!0,seekForward:!0,seekBackward:!0}){this.unregisterMediaSessionActionHandlers();let t={},r=e=>{this.isDead()||e()};e.play&&(t.play=()=>r(()=>this.play())),e.pause&&(t.pause=()=>r(()=>this.pause())),e.seekBackward&&(t.seekBackward=()=>r(()=>{this.seek(Math.max(0,this.getPosition()-5e3))})),e.seekForward&&(t.seekForward=()=>r(()=>{this.seek(Math.min(this.getDuration()||0,this.getPosition()+5e3))})),this._mediaSessionManagerHandle=Z.register(new ee(this,t))}unregisterMediaSessionActionHandlers(){this._mediaSessionManagerHandle&&(this._mediaSessionManagerHandle.remove(),this._mediaSessionManagerHandle=null)}kill(){this._stateManager.update(e=>{e.dead||(this._logger.debug("kill() called."),e.dead=!0)})}_seek(e,t,r){let i=()=>{if(t)return!0;try{return this._seekStrategy.isSeekAllowed(e)}catch(e){return this._triggerError(new Q("Seek strategy threw an error.",e)),!1}};this._ensureNotDead(),this._logger.debug("seek() called.",e);let s=w();return this._stateManager.update(t=>{if(e<0)this._logger.warn("Rejecting seek immediately as the position was negative."),t.seekBlockedError=Error("You were attempting to seek to a negative time.");else if(null!==t.duration&&e>t.duration)this._logger.warn("Rejecting seek immediately as the duration is now known, and the requested positon was past it."),t.seekBlockedError=Error("You were attempting to seek past the end of the media.");else if(i()){if(t.stalled||!t.actuallyPlaying||t.seek&&"IN_PROGRESS"===t.seek.state||(this._lastPlayedPosition=this._getPositionOrPositionSeekingTo()),t.seek&&"IN_PROGRESS"===t.seek.state&&t.seek.position===e)this._logger.debug("Seek already requested to the same position.",e);else{this._logger.debug("Requesting seek.",e),t.seeking=!0;let i=this._extractSeekFadeDurations(r,e),s=i.fadeOutDuration?-(1/i.fadeOutDuration*1):null,n=i.fadeInDuration?1/i.fadeInDuration:null;t.seekBlockedError=null,t.seek={state:"IN_PROGRESS",position:e,fadeRate:{beforeSeek:s,afterSeek:n}},t.positionJumped=Object.create(null)}}else this._logger.warn("Rejecting seek immediately as the seek strategy has denied it or threw an error."),t.seekBlockedError=Error("The provided seeking strategy has blocked the attempt to seek.");let n=w();this._queuedSeekDeferreds.push({position:e,deferred:n,active:!1}),s.resolve(n.promise)}),s.promise}_update(e){this._stateManager.update(()=>e&&e())}_ensureNotDead(){if(this._stateManager.getState().dead)throw Error("Player is dead.")}_notifyStalled(e){this._ensureNotDead(),this._stalled!==e&&(this._logger.debug("notifyStalled() called.",e),this._stalled=e,this._stateManager.update())}_getQueuedSeekPosition(){let e=this.getSeekState();return e&&"IN_PROGRESS"===e.state?e.position:null}_provideDuration(e){this._ensureNotDead(),this._stateManager.update(t=>{if(t.duration===e)return;let r=this._getPositionOrPositionSeekingTo();if(e<0||t.ready&&r>e)throw this._triggerError(new Q("Attempt to update duration to an invalid value.")),Error("Duration cannot be less than the current position.");this._logger.debug("provideDuration() called.",e),t.ready?t.duration=e:this._queuedDuration=e})}_notifyVolumeChange(e,t){if(e<0||e>1)throw this._triggerError(new Q("Volume was out of range.",e)),Error("Volume was out of range.");this._stateManager.update(r=>{r.volume=e,r.muted=t})}_notifyPlaying(e){this._ensureNotDead(),this._stateManager.update(t=>{if(!t.ready)throw this._triggerError(new Q("Attempt to register playback as started before ready.")),Error("Player must be ready first.");e!==t.actuallyPlaying&&(this._logger.debug("notifyPlaying() called.",e),e||t.seeking||t.stalled||(this._lastPlayedPosition=this._getPositionOrPositionSeekingTo()),t.actuallyPlaying=t.playing=e,e?(this._lastPlayError=null,this._fadeStartAllowed=!0):(t.isFading=!1,this._fadeStartAllowed=!1,this._lastPauseError=null))})}_notifyPlayRejection(e){this._ensureNotDead(),e=e||Error("Unknown error."),this._stateManager.update(t=>{if(!t.ready)throw this._triggerError(new Q("Attempt to reject a play request before player ready.")),Error("Player must be ready first.");if(t.actuallyPlaying||!t.playing)throw this._triggerError(new Q("Attempt to reject a play request when not valid.")),Error("Playing state is incorrect.");this._logger.debug("notifyPlayRejection() called.",e),t.playing=!1,this._lastPlayError=e})}_notifyPauseRejection(e){this._ensureNotDead(),e=e||Error("Unknown error."),this._stateManager.update(t=>{if(!t.ready)throw this._triggerError(new Q("Attempt to reject pause request before player ready.")),Error("Player must be ready first.");if(!t.actuallyPlaying||t.playing)throw this._triggerError(new Q("Attempt to reject pause request when not valid.")),Error("Playing state is incorrect.");this._logger.debug("notifyPauseRejection() called.",e),t.playing=!0,t.fadeRate&&(t.fadeRate*=-1),this._lastPauseError=e})}_signalSeekBlocked(e=Error("Seek blocked.")){this._ensureNotDead(),this._stateManager.update(t=>{if(this._activeSeek===t.seek||!t.seek||"IN_PROGRESS"!==t.seek.state)throw this._triggerError(new Q("_signalSeekBlocked called when no seek to block.")),Error("_signalSeekBlocked called when no seek to block.");if(t.isFadingForSeek)throw this._triggerError(new Q("_signalSeekBlocked called after fade out started.")),Error("_signalSeekBlocked called after fade out started.");t.seek=this._activeSeek,t.positionJumped=this._activeSeekPositionJumped,t.seeking=!!this._activeSeek&&"IN_PROGRESS"===this._activeSeek.state,t.seekBlockedError=e})}_notifySeekRejection(e){this._ensureNotDead(),e=e||Error("Unknown error."),this._stateManager.update(t=>{if(!t.seek||"IN_PROGRESS"!==t.seek.state)throw this._triggerError(new Q("Attempt to reject seek request when none requested.")),Error("A seek hasn't been requested.");if(null!==t.duration&&t.position>t.duration)throw this._triggerError(new Q("Attempt to reject seek request after duration changed below current position.")),Error("Attempt to reject seek request after duration changed below current position.");this._logger.debug("notifySeekRejection() called.",e),t.seeking=!1,t.seek={state:"ERROR",error:e},t.positionJumped=Object.create(null)})}_notifyFading(e){if(this._ensureNotDead(),e&&!this._fadeStartAllowed){let e="Attempt to register fade as starting when not allowed.";throw this._triggerError(new Q(e)),Error(e)}this._implementationIsFading=e,this._stateManager.update(t=>{t.isFading!==e&&(this._logger.debug("notifyFading() called",e),t.isFading=e)})}_notifyFadingForSeek(e){if(this._ensureNotDead(),e&&!this._seekFadeStartAllowed){let e="Attempt to register fade as starting for seek when not allowed.";throw this._triggerError(new Q(e)),Error(e)}this._stateManager.update(t=>{t.isFadingForSeek!==e&&(this._logger.debug("notifyFadingForSeek() called",e),t.isFadingForSeek=e)})}_signalReady(){this._ensureNotDead(),this._stateManager.update(e=>{if(e.ready)throw this._triggerError(new Q("Attempt to signal ready twice.")),Error("Ready already signalled.");if(null===this._queuedDuration)throw this._triggerError(new Q("Attempt to signal ready when duration unknown.")),Error("Duration is still unknown.");this._logger.debug("signalReady() called."),e.ready=!0,e.duration=this._queuedDuration,e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position>e.duration&&(e.seeking=!1,e.seek={state:"ERROR",error:Error("You were attempting to seek past the end of the media.")})})}_signalSeekComplete(){this._ensureNotDead(),this._stateManager.update(e=>{if(!e.ready)throw this._triggerError(new Q("Attempt to signal seek as complete before player ready.")),Error("Player must be ready first.");if(!e.seek||"IN_PROGRESS"!==e.seek.state)throw this._triggerError(new Q("Attempt to signal seek as complete when none requested.")),Error("There shouldn't be a seek in progress.");let t=e.duration;if(e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position>t)throw Error("Seek cannot have completed given it was to a time greater than the duration.");this._logger.debug("signalSeekComplete() called."),this._seekFadeStartAllowed=!0,this._positionWhenStartedFadeOut=null,e.seek={state:"COMPLETED",position:e.seek.position,fadeRate:e.seek.fadeRate},e.seeking=!1,e.position=e.seek.position})}_triggerError(e){e instanceof B&&(this._fatalErrorTriggered=!0),this._stateManager.update(t=>{let r=!1;if(t.ready&&e instanceof W&&(e=new Q("Invalid NotSupportedError."),r=!0),e instanceof B?(e instanceof W?this._logger.info("NotSupportedError occurred.",e):this._logger.error("Fatal error occurred.",e),t.fatalError?this._logger.warn("A fatal error already occurred.",t.fatalError):t.fatalError=e,this._errors.push(e),t.errorOccurred=Object.create(null),t.dead=!0):(this._logger.warn("Non-fatal error occurred.",e),this._errors.push(e),t.errorOccurred=Object.create(null)),r)throw Error("Not supported errors are only valid before the player is ready.")})}_buildEventHandle(e){return{subscribe:r=>{let i=e=>r(e,t());return this._stateManager.subscribe((t,r)=>{e(i,t,r)})}}}_finalizeState(e){this._updateEndedInState(e);let t=this._getPositionOrPositionSeekingTo();if(e.dead)this._lastPlayError=Error("Player was killed."),e.loading=!1,this._clearLoadingDelay(),!e.playing&&e.isFading&&null!==this._positionWhenStartedFadeOut&&(this._logger.debug("Fade out was in progress. Pretending it completed."),e.isFading=!1,e.position=this._positionWhenStartedFadeOut),e.stalled=!0,e.actuallyPlaying=!1,e.isFadingForSeek=!1,e.playing=!1,e.state=y.DEAD;else{let r=!e.ended&&(!e.ready||this._stalled||!!(e.seek&&"IN_PROGRESS"===e.seek.state));r&&!e.stalled&&!e.seeking&&e.actuallyPlaying&&(this._lastPlayedPosition=t),e.stalled=r,!e.ended&&!e.isFading&&!e.isFadingForSeek&&(e.playing||e.actuallyPlaying)&&(e.stalled||e.playing!==e.actuallyPlaying)?this._loadingDelay?this._scheduleLoadingDelay():e.loading=!0:(e.loading=!1,this._clearLoadingDelay()),this._positionAfterLastUpdate===t||(this._positionAfterLastUpdate=t,e.playing||e.actuallyPlaying||(e.positionJumped=Object.create(null))),e.state=this._calculateState(e)}}_updateEndedInState(e){e.ended=e.ready&&this._getPositionOrPositionSeekingTo()===e.duration}_scheduleLoadingDelay(){this._loadingDelayTimer||(this._loadingDelayTimer=window.setTimeout(()=>{this._stateManager.update(e=>e.loading=!0)},this._loadingDelay))}_clearLoadingDelay(){this._loadingDelayTimer&&(window.clearTimeout(this._loadingDelayTimer),this._loadingDelayTimer=null)}_getPositionOrPositionSeekingTo(){this._stateManager.update();let e=this._stateManager.getState();return e.seek&&"IN_PROGRESS"===e.seek.state?e.seek.position:e.isFading&&!e.playing&&null!==this._positionWhenStartedFadeOut?this._positionWhenStartedFadeOut:e.ready&&null!==e.duration?e.position:0}_calculateState({dead:e,loading:t,playing:r,ended:i}){return e?y.DEAD:t?y.LOADING:r&&!i?y.PLAYING:y.PAUSED}_extractFadeDuration(e={}){return void 0===e.fadeDuration?!this._stateManager.getState().playing||this._getPositionOrPositionSeekingTo()>0?this._defaultFadeDuration:0:e.fadeDuration>0?e.fadeDuration:0}_extractSeekFadeDurations(e={},t){return{fadeOutDuration:void 0!==e.fadeOutDuration?e.fadeOutDuration>0?e.fadeOutDuration:0:this._defaultSeekFadeOutDuration,fadeInDuration:void 0!==e.fadeInDuration?e.fadeInDuration>0?e.fadeInDuration:0:t>0?this._defaultSeekFadeInDuration:0}}_configureRewindAfterFadeOut(){this._stateManager.subscribe(({isFading:e},{seeking:t,playing:r,dead:i})=>{i||!1!==e||r||null===this._positionWhenStartedFadeOut||t||this.seek(this._positionWhenStartedFadeOut,{fadeInDuration:0,fadeOutDuration:0}).catch(e=>{this._logger.warn("Seek back to position where fade out started failed.",e)})})}_afterUpdate(e,t){if(t.beforeUpdate||t.update.length>0)this._logger.error("Errors occurred during state update. Killing player.",t),this._triggerError(new B("Errors occurred during state update.",t));else if(!e.dead&&e.ready){let t=e.duration;null!==t&&!e.seeking&&e.position>t&&(this._logger.error("Player provided invalid position.",e.position,t),this._triggerError(new Q("Player provided a position that was invalid.")))}this._finalizeState(e)}_afterDispatches(){let e=this._errors;this._errors=[],e.forEach(e=>this._onError.dispatch(e))}_onChange({ready:e,dead:r,fatalError:i,playing:s,actuallyPlaying:n,ended:o},a){if(!0===e&&(this._logger.debug("Resolving ready deferred."),this._readyDeferred.resolve(void 0)),!0===s&&this._mediaSessionEnabled&&!this._mediaSessionManagerHandle&&this.registerMediaSessionActionHandlers({play:!0,pause:!0,seekForward:!0,seekBackward:!0}),a.pauseDeferred&&!a.pauseDeferred.isSettled()&&a.playing){let e=this._lastPauseError||Error("Pause request aborted.");this._logger.debug("Rejecting pause deferred.",e),a.pauseDeferred.reject(e)}if(a.playDeferred&&!a.playDeferred.isSettled()&&!a.playing){let e=this._lastPlayError||Error("Play request aborted.");this._logger.debug("Rejecting play deferred.",e),a.playDeferred.reject(e)}if(a.playDeferred&&!a.playDeferred.isSettled()&&a.actuallyPlaying&&(this._logger.debug("Resolving play deferred."),a.playDeferred.resolve(void 0)),!a.pauseDeferred||a.pauseDeferred.isSettled()||a.actuallyPlaying||(this._logger.debug("Resolving pause deferred."),a.pauseDeferred.resolve(void 0)),!0===n&&!a.ended||!1===o&&a.actuallyPlaying?this._timePlaybackStarted=t():(!1===n&&!a.ended||!0===o&&a.actuallyPlaying)&&(this._listenTimeBase+=t()-this._timePlaybackStarted,this._timePlaybackStarted=null),!0===r){this._logger.debug("Calling _kill() on player.");try{this._kill(),this._logger.info("Player killed.")}catch(e){this._triggerError(new Q("Exception occurred in _kill().",e)),this._logger.error("Exception when implementation was being killed.",e)}if(this.unregisterMediaSessionActionHandlers(),!a.ready){let e=i||Error("Player was killed.");this._logger.debug("Rejecting whenReady."),this._readyDeferred.reject(e)}this._queuedSeekDeferreds.forEach(({position:e,deferred:t})=>{let r=i||Error("Seek aborted as player killed.");this._logger.debug("Rejecting seek().",e),t.reject(r)}),this._queuedSeekDeferreds=[],this._stateManager.kill(),this._logger.debug("Player dead.")}}}class ei extends G{constructor(e,t,r="The player that the proxy was controlling had an error."){super(r),this._providedPlayerError=e,this._providedPlayer=t}getCode(){return"PROXY_PLAYER_PROVIDED_PLAYER_ERROR"}getProvidedPlayerError(){return this._providedPlayerError}getProvidedPlayer(){return this._providedPlayer}}class es extends ei{constructor(e,t,r="The player that the proxy was controlling had a fatal error."){super(e,t,r)}getCode(){return"PROXY_PLAYER_PROVIDED_PLAYER_FATAL_ERROR"}}class en extends er{constructor(e){super(e),this._onProvidedPlayerError=new s,this._errorHandler=null,this._changeHandler=null,this._player=null,this._instanceLock=null,this._playConfig=void 0,this._pauseConfig=void 0,this._seekConfig=void 0,this._lastPlayerPosition=0,this._initialProvidedPlayerPosition=0,this._synced=!1,this._unsyncInProgress=!1,this._seekingProvidedPlayer=!1,this._logger=q(this._logger,"ProxyPlayerBase"),this.onProvidedPlayerError=this._onProvidedPlayerError.getHandle()}getBufferedTimeRanges(){return this._player&&this._synced?this._player.getBufferedTimeRanges():null}getCurrentBufferedTimeRange(){return this._player&&this._synced?this._player.getCurrentBufferedTimeRange():null}getMaxBufferLength(){return this._player&&this._synced?this._player.getMaxBufferLength():null}_providePlayer(e,t={}){if(t=Object.assign({syncPosition:!0,syncVolume:!0},t),this._ensureNotDead(),this._player)throw Error("A player has already been provided.");this._logger.debug("providePlayer() called."),this._instanceLock=Object.create(null),this._player=e,this._sync(t)}_removePlayer(){if(this._ensureNotDead(),!this._player)throw Error("There is no player to remove.");if(this._unsyncInProgress)throw Error("Player is currently unsyncing.");this._logger.debug("removePlayer() called."),this._instanceLock=null,this._unsync(),this._player=null,this.isReady()&&!this.isDead()&&this._update(()=>{let e=null!==this._getQueuedSeekPosition();this._notifyFading(!1),e||null===this._getQueuedSeekPosition()||this._signalSeekComplete(),this._notifyFadingForSeek(!1),this._notifyStalled(!0)})}_setInitialDuration(e){if(this._ensureNotDead(),e<0)throw Error("Cannot set duration to a value < 0.");null===this.getDuration()&&this._update(()=>{this._ensureBelowPosition(e),this._provideDuration(e),this.isReady()||(this._signalReady(),this._handleSkippedSeek())})}_triggerError(e){super._triggerError(e)}_getPlayer(){return this.isDead()?null:this._player}_handleVolumeChange(e,t){this._synced&&this._player?this._player.setVolume(e,t):this._notifyVolumeChange(e,t)}_handlePlayPauseChange(e,{fadeRate:t}){e?this._playConfig={fadeDuration:void 0!==t?1/t:0}:this._pauseConfig={fadeDuration:void 0!==t?-1/t:0};let r=this._player;if(r){let t=this._instanceLock;this._update(()=>{if(e)this._playAndHandleAbort(r);else{if(this._pauseAndHandleAbort(r),this._instanceLock!==t)return;r.isFading()&&this._notifyFading(!0)}})}}_handleSeekChange(e,{fadeRate:t}){this._seekConfig={fadeOutDuration:void 0!==t.beforeSeek?-1/t.beforeSeek:0,fadeInDuration:void 0!==t.afterSeek?1/t.afterSeek:0};let r=this._player,i=this._instanceLock;if(r&&this._synced){if(this._seekingProvidedPlayer=!0,r.seek(e,this._seekConfig),i!==this._instanceLock)return;this._seekingProvidedPlayer=!1,r.isFadingForSeek()&&this._notifyFadingForSeek(!0)}}_getPosition(){if(this._player&&this._synced){if(!this._changeHandler)throw Error("Handler should exist.");if(this._changeHandler.retrieve(),this._synced)return this._player.getPosition()}return this._lastPlayerPosition}_kill(){this._player&&(this._unsync(),this._player.kill()),this._player=null}_handleSkippedSeek(){if(this._player&&this._synced){let e=this.getSeekState(),t=this._player.getSeekState();e&&"IN_PROGRESS"===e.state&&(!t||"IN_PROGRESS"!==t.state)&&(this._logger.debug("Signalling seek as complete on proxy because provided player isn't seeking."),this._signalSeekComplete())}}_ensureBelowPosition(e){this.getPosition()>e&&(this._logger.debug("Capping position.",e),this._seek(e,!0),this.isReady()&&(this._lastPlayerPosition=e,this._signalSeekComplete()))}_sync(e){let t=this._player;if(!t)throw Error("Player should have become available by now.");if(this._logger.debug("Syncing...",this.isPlaying(),this.isActuallyPlaying()),t.isDead()){this._logger.debug("Provided player is dead.");let e=t.getFatalError();e&&this._handleFatalError(e,t);return}this._errorHandler=t.onError.subscribe(e=>{e instanceof B?this._onProvidedPlayerError.dispatch(new es(e,t)):(this._triggerError(e),this._onProvidedPlayerError.dispatch(new ei(e,t)))}),this._changeHandler=t.onChange.subscribe(e=>{this._update(()=>{if(this._logger.debug("Handling changes.",e),e.dead){this._logger.debug("Player has gone to DEAD state."),this._unsync(),!this.isDead()&&e.fatalError&&this._handleFatalError(e.fatalError,t);return}(void 0!==e.volume||void 0!==e.muted)&&this._notifyVolumeChange(t.getVolume(),t.getMuted()),void 0===e.duration||(this._ensureBelowPosition(e.duration),this._provideDuration(e.duration),this.isReady()||(this._signalReady(),this._handleSkippedSeek(),this._notifyStalled(t.isStalled())));let r=this.getSeekState();e.seekBlockedError&&this._seekingProvidedPlayer&&(this._synced?this._signalSeekBlocked(e.seekBlockedError):r&&"IN_PROGRESS"===r.state?this._notifySeekRejection(e.seekBlockedError):(this._logger.debug("Provided player blocked seek when trying to sync."),this._seek(this._initialProvidedPlayerPosition,!0),this._signalSeekComplete())),e.seek&&(r&&"IN_PROGRESS"===r.state||"IN_PROGRESS"!==e.seek.state?r&&"IN_PROGRESS"===r.state&&("COMPLETED"===e.seek.state&&r.position===e.seek.position?(this._signalSeekComplete(),t.isFadingForSeek()&&this._notifyFadingForSeek(!0)):"COMPLETED"===e.seek.state&&r.position!==e.seek.position?this._notifySeekRejection(Error("Another seek occurred to a different position.")):"IN_PROGRESS"===e.seek.state&&r.position!==e.seek.position?this._seek(e.seek.position,!0):"ERROR"===e.seek.state&&this._notifySeekRejection(e.seek.error)):this._seek(e.seek.position,!0)),void 0!==e.stalled&&this._notifyStalled(e.stalled),!1===e.playing&&e.playRejection?this.isActuallyPlaying()?(this._triggerError(new G("Paused because a player was provided that refused to play.")),this._notifyPlaying(!1)):this._notifyPlayRejection(e.playRejection):!1===e.playing&&(t.isActuallyPlaying()?this.pause():void 0===e.actuallyPlaying&&this.isReady()&&this._notifyPlaying(!1)),!0===e.playing&&e.pauseRejection?this._notifyPauseRejection(e.pauseRejection):!0===e.playing&&this.play(),void 0!==e.actuallyPlaying&&e.actuallyPlaying!==this.isActuallyPlaying()&&(this._notifyPlaying(e.actuallyPlaying),e.actuallyPlaying&&t.isFading()&&this._notifyFading(!0)),!1===e.fading&&this._notifyFading(!1),!1===e.fadingForSeek&&this._notifyFadingForSeek(!1)})}),this._update(()=>{let r=this._instanceLock;try{if(this._notifyStalled(t.isStalled()),t.isReady()){let e=t.getDuration();this._ensureBelowPosition(e),this._provideDuration(e),this.isReady()||(this._logger.debug("Provided player is already ready. Making proxy player ready."),this._signalReady())}if(e.syncVolume&&(t.setVolume(this.getVolume(),this.getMuted()),this._instanceLock!==r))return;let i=this.getSeekState();if(e.syncPosition){this._logger.debug("Seeking to match position.");let e=this.getPosition(),s=this._initialProvidedPlayerPosition=t.getPosition();if(this._instanceLock!==r)return;if(s!==e){if(this._seekingProvidedPlayer=!0,t.seek(e),this._instanceLock!==r)return;this._seekingProvidedPlayer=!1}else this._logger.debug("Skipping seek because already at same position."),this.isReady()&&i&&"IN_PROGRESS"===i.state&&this._signalSeekComplete()}else{if(i&&"IN_PROGRESS"===i.state&&(this._logger.debug("Seeking to match position because a seek has been queued."),t.seek(this.getPosition(),this._seekConfig),this._instanceLock!==r))return;let e=t.getSeekState();e&&"IN_PROGRESS"===e.state&&(this._logger.debug("Seeking on proxy to match seek that is in progress on provided player."),this._seek(e.position,!0))}if(t.isActuallyPlaying()?(this._logger.debug("Provided player is already playing."),!this.isActuallyPlaying()&&(this._notifyPlaying(!0),t.isFading()&&this._notifyFading(!0))):t.isPlaying()?(this._logger.debug("Provided player is preparing to play."),this.play()):this.isPlaying()?(this._logger.debug("Calling play() on provided player to match proxy."),this._playAndHandleAbort(t)):this.isReady()&&this.isActuallyPlaying()&&(this._logger.debug("Switching to paused state, as provided player and proxy intended state is paused."),this._notifyPlaying(!1)),this._instanceLock!==r)return;this._synced=!0,this._notifyVolumeChange(t.getVolume(),t.getMuted())}catch(e){this._triggerError(new B("Unexpected error occurred whilst syncing.",e))}})}_playAndHandleAbort(e){let t=this._instanceLock;this._logger.debug("Calling play() on provided player."),e.play(this._playConfig),this._instanceLock===t&&!e.isPlaying()&&this.isPlaying()&&(this._logger.debug("Provided player was not playing after play() call completed."),this.isActuallyPlaying()?(this._triggerError(new G("Paused because a player was provided that refused to play.")),this._notifyPlaying(!1)):this.pause())}_pauseAndHandleAbort(e){let t=this._instanceLock;this._logger.debug("Calling pause() on provided player."),e.pause(this._pauseConfig),this._instanceLock===t&&e.isPlaying()&&!this.isPlaying()&&(this._logger.debug("Provided player was not paused after pause() call completed."),this.play())}_unsync(){if(this._logger.debug("Unsyncing..."),this._changeHandler&&(this._changeHandler.remove(),this._changeHandler=null),this._errorHandler&&(this._errorHandler.remove(),this._errorHandler=null),!this._synced){this._logger.debug("Unsynced. (Sync never completed)");return}this._synced=!1,this._unsyncInProgress=!0;let e=this._player;if(e)try{this._lastPlayerPosition=e.getPosition()}catch(e){this._logger.error("Error whilst unsyncing.",e)}this._unsyncInProgress=!1,this._seekingProvidedPlayer=!1,this._logger.debug("Unsynced.",this.isPlaying(),this.isActuallyPlaying())}}class eo extends en{constructor(e){super(e),this._onPlayerProvided=new s,this._onPlayerRemoved=new s,this._shouldPassThroughFatalErrors=!!e.shouldPassThroughFatalErrors,this.onPlayerProvided=this._onPlayerProvided.getHandle(),this.onPlayerRemoved=this._onPlayerRemoved.getHandle(),this._logger=q(this._logger,"ProxyPlayer")}providePlayer(e,t={}){this._providePlayer(e,t),this._onPlayerProvided.dispatch(e)}removePlayer(){let e=this._getPlayer();if(!e)throw Error("There is no player to remove.");this._removePlayer(),this._onPlayerRemoved.dispatch(e)}setInitialDuration(e){this._setInitialDuration(e)}getPlayer(){return this._getPlayer()}_handleFatalError(e,t){this._shouldPassThroughFatalErrors?this._triggerError(e):this._triggerError(new es(e,t))}}class ea extends B{constructor(e,t){super(e||"The URL update failed for some reason.",t)}getCode(){return"URL_UPDATE_ERROR"}}(a=b||(b={})).PlayerError=G,a.PlayerFatalError=B,a.NotSupportedError=W,a.URLUpdateError=ea,a.ImplementationError=Q,a.ProxyProvidedPlayerFatalError=es;class el{constructor(e,t){this._msg=e,this._cause=t}getMsg(){return this._msg}getCause(){return this._cause}}(v||(v={})).LoaderError=el;let eu="undefined"!=typeof window&&"Map"in window;class ed{constructor(){this._store=[]}set(e,t){let r=z(this._store,t=>t.key===e);r?r.val=t:this._store.push({key:e,val:t})}get(e){let t=z(this._store,t=>t.key===e);if(t)return t.val}}var eh=r(4);let ec=/^.*\.([^.;?#]*).*$/;var e_=r(5),eg=r.n(e_);class ep{constructor(){this._map=new(eg())}get(e){return this._map.get(e)}set(e,t){this._map.set(e,t)}has(e){return this._map.has(e)}delete(e){return this._map.delete(e)}}(l=E||(E={})).OnExit=V,l.find=z,l.Promise=S.Promise,l.promiseWithTimeout=function(e,t,r=Error("Timed out.")){return new S.Promise((i,s)=>{let n=window.setTimeout(()=>{s(r)},t);R(e,e=>(window.clearTimeout(n),e)).then(i,s)})},l.always=R,l.compact=function(e){return e.filter(e=>null!=e)},l.deferException=D,l.SCWeakMap=ep,(l.cache||(l.cache={})).buildCache=function(){return eu?new window.Map:new ed},(l.deferred||(l.deferred={})).buildDeferred=w,(u=l.url||(l.url={})).getExtension=function(e){let t=ec.exec(e);return t?t[1].toLowerCase():null},u.buildAbsoluteUrl=function(e,t){return eh.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},(d=l.abortableJob||(l.abortableJob={})).AbortableJob=x,d.map=function(e,{convertResult:t,convertProgressUpdate:r,abortableJobOpts:i,passThroughAbort:n=!0}){return new x(()=>{let i=e(),o=new s,a=!0,l=w();return r&&i.onProgressUpdate(e=>{o.dispatch(r(e,a)),a=!1},{skipPast:!0}),i.onCompletion(e=>{try{l.resolve(t(e))}catch(e){l.reject(e)}}),i.onError(l.reject),{result:l.promise,progressUpdates:r?{onProgressUpdate:o,getProgressSoFar:()=>{let e=i.getProgressSoFar();if(e){let t=r(e,a);return a=!1,t}return null}}:void 0,abort:()=>n&&i.abort()}},i)},d.abortedError=O,(h=l.retry||(l.retry={})).retry=function(e,t,r={}){let i=null,s=0,n=!1,o=null,a=()=>{let l=!1;o=t({attemptNum:s,scheduleRetry:()=>{if(l)throw Error("scheduleRetry() already called.");if(l=!0,o=null,n)return!1;let t=e(++s);if(null!==t)return i=window.setTimeout(a,t),!0;{let{onNoMoreRetries:e}=r;return e&&D(()=>e()),!1}}})||null};return a(),{cancel:()=>{!n&&(n=!0,i&&(window.clearTimeout(i),i=null),o&&o.onCancel())}}},h.buildExponentialDelayCalculator=function({timeBase:e=500,threshold:t=3,delayCap:r=45e3,jitter:i=200,maxAttempts:s=null}={}){if(e<=0)throw Error("Time base must be > 0.");if(t<=0)throw Error("Threshold must be > 0.");if(null!==r&&r<=0)throw Error("Delay cap must be null or > 0.");if(null!==s&&s<1)throw Error("Max attempts must be >= 1.");return n=>null!==s&&n>=s?null:Math.min((n>0?Math.pow(2,n/t-1):0)*e,r||1/0)+Math.round(Math.random()*i)},(c=l.browser||(l.browser={})).isSafari=function(){return F},c.getSafariVersion=function(){return U(N)},c.isIE=function(){return C},c.isEdge=function(){return M},c.isFirefox=function(){return I},c.isChrome=function(){return T},c.getChromeVersion=function(){return U(L)},c.getFirefoxVersion=function(){return U(H)},(_=l.arrayBuffer||(l.arrayBuffer={})).combine=function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.byteLength}),t},_.fill=function(e,t){e.fill(t)},_.forEach=function(e,t){e.forEach(t)},_.numberToUint8Array=function(e,t=!1){if((e=Math.round(e))<0)throw Error("Negative numbers not supported.");let r=Math.max(1,Math.ceil(Math.log(e+1)/Math.log(2)/8)),i=new Uint8Array(r);for(let s=0;s<r;s++)i[t?s:r-1-s]=255&e,e>>>=8;return i},_.createVintBuffer=function(e){let t;if(e<0||e>9007199254740992)throw Error("Unrepresentable value: "+e);for(t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t++);let r=new Uint8Array(t);for(let i=1;i<=t;i++){let s=255&e;r[t-i]=s,e-=s,e/=256}return r[0]|=1<<8-t,r},(l.time||(l.time={})).now=t;class ef{constructor(e,t){if(this.start=e,this.duration=t,t<0)throw RangeError("Duration must be >= 0.");this.end=e+t}static normalizeRawTimeRanges(e){return e.slice(0).sort((e,t)=>e.start-t.start).reduce((e,t,r)=>{let i=e.length-1;return r>0&&e[i].end>=t.start?e[i].end=t.end:e.push(t),e},[])}static normalize(e){return ef.normalizeRawTimeRanges(e.map(e=>({start:e.start,end:e.end}))).map(e=>new ef(e.start,e.end-e.start))}static getCoverage(e){if(0===e.length)return new ef(0,0);let t=1/0,r=0;return e.forEach(e=>{e.start<t&&(t=e.start),e.end>r&&(r=e.end)}),new ef(t,r-t)}static rangesContainTime(e,t){return t.some(t=>t.containsTime(e))}containsTime(e){return this.start<=e&&this.end>e}}let ey={isSeekAllowed:()=>!1},eb="31.1.0",ev=2227;(m||(m={})).EventDispatcher=s,(g=k||(k={})).LoaderRequest=A,g.ResponseState=f,(p=P||(P={})).noOpLogger={debug:(e,...t)=>{},error:(e,...t)=>{},info:(e,...t)=>{},warn:(e,...t)=>{}},p.consoleLogger={debug:(e,...t)=>{C?console.log(e,t):(console.debug||console.log).call(console,e,...t)},error:(e,...t)=>{C?console.log(e,t):(console.error||console.log).call(console,e,...t)},info:(e,...t)=>{C?console.log(e,t):(console.info||console.log).call(console,e,...t)},warn:(e,...t)=>{C?console.log(e,t):(console.warn||console.log).call(console,e,...t)}},p.prefixLogger=q,p.cloneLogger=function(...e){return{debug:(t,...r)=>e.forEach(e=>e.debug(t,...r)),error:(t,...r)=>e.forEach(e=>e.error(t,...r)),info:(t,...r)=>e.forEach(e=>e.info(t,...r)),warn:(t,...r)=>e.forEach(e=>e.warn(t,...r))}}})(),i})(),e.exports=t()}}]);