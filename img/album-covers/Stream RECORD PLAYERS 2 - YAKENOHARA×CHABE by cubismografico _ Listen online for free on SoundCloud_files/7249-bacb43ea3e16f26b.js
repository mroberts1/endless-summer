(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7249],{10639:function(){},63620:function(){},67652:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(35979),a=n(49971);let o=(0,a.forwardRef)((e,t)=>{let{onSelectFiles:n,...o}=e,i=(0,a.useRef)(null);return(0,a.useImperativeHandle)(t,()=>({selectFiles:()=>i.current?.click()}),[]),(0,r.jsx)("input",{...o,hidden:!0,ref:i,type:"file",onChange:e=>{let{target:t}=e,{files:r}=t;if(!r||0===r.length)return null;n(r)}})});o.displayName="HiddenTrackInput"},65976:function(e,t,n){"use strict";var r,a;n.d(t,{c:function(){return r},g:function(){return o}}),(a=r||(r={})).StartPage="StartPage",a.IsExplicit="IsExplicit",a.CheckboxQuestions="CheckboxQuestions",a.UploadDocumentation="UploadDocumentation",a.HasISRC="HasISRC",a.EnterISRC="EnterISRC",a.ArtistAndLegalName="ArtistAndLegalName",a.Success="Success";let o={StartPage:{progress:0,next:"IsExplicit"},IsExplicit:{progress:1/6,previous:"StartPage",next:"ArtistAndLegalName"},ArtistAndLegalName:{progress:2/6,previous:"IsExplicit",next:"HasISRC"},HasISRC:{progress:.5,previous:"ArtistAndLegalName",next:{yes:"EnterISRC",no:"CheckboxQuestions"}},EnterISRC:{progress:3.5/6,previous:"HasISRC",next:"CheckboxQuestions"},CheckboxQuestions:{progress:4/6,previous:{requestedAutogenerateISRC:"HasISRC",manuallyEnteredISRC:"EnterISRC"},next:{oneOrMoreBoxesChecked:"UploadDocumentation",noBoxesChecked:"Success"}},UploadDocumentation:{progress:5/6,previous:"CheckboxQuestions",next:"Success"},Success:{progress:1,previous:"UploadDocumentation"}}},97686:function(e,t,n){"use strict";n.d(t,{MonetizationProvider:function(){return v},o:function(){return h},l:function(){return b}});var r=n(35979),a=n(65976),o=n(49971),i=n(69124),l=n(81881);let s=l.z.object({artistName:l.z.string(),composerName:l.z.string()}),u=l.z.object({key:l.z.string(),bucket:l.z.string()}),c=l.z.object({hasISRC:l.z.boolean().optional(),isrc:l.z.literal("").or(i.b.nullable().optional()),licenseDocumentation:u.optional(),contributor:s.optional(),explicitLabel:l.z.boolean().optional(),isCover:l.z.boolean().optional(),isRemix:l.z.boolean().optional(),usedSamples:l.z.boolean().optional(),usedAI:l.z.boolean().optional(),isSongWriter:l.z.boolean().optional(),label:l.z.string().optional()}).superRefine((e,t)=>{let{hasISRC:n,isrc:r}=e;n&&!r?.length&&t.addIssue({code:l.z.ZodIssueCode.custom,path:["isrc"],message:"required"})}).transform(e=>{let{usedAI:t,hasISRC:n,...r}=e;return r}),d=l.z.object({monetizationRequests:l.z.record(c)}),p={isrc:null,licenseDocumentation:{key:"",bucket:""},contributor:{artistName:"",composerName:""},explicitLabel:!1,isCover:!1,isRemix:!1,usedSamples:!1,usedAI:!1,isSongWriter:!1,label:"",hasISRC:!1};var m=n(50120),g=n(52214);let f=(0,o.createContext)({requests:{},goToStep:()=>{},setMonetizationFormComplete:()=>{},setMonetizationFormValues:()=>{},setTrackUid:()=>{},addRequest:()=>{},removeRequest:()=>{},monetizationFormMethods:null}),v=e=>{let{children:t}=e,[n,i]=(0,o.useState)({}),l=(0,m.cI)({resolver:(0,g.F)(d,{}),mode:"onSubmit"}),{setValue:s}=l,u=(0,o.useCallback)(e=>{s(`monetizationRequests.${e}`,p),i(t=>({...t,[e]:{monetizationFormComplete:!1,currentStep:a.c.StartPage,trackUid:"",monetizationFormValues:p}}))},[]);return(0,r.jsx)(f.Provider,{value:{requests:n,addRequest:u,goToStep:(e,t)=>{i(n=>({...n,[e]:{...n[e],currentStep:t}}))},setMonetizationFormComplete:(e,t)=>{i(n=>({...n,[e]:{...n[e],monetizationFormComplete:t}}))},setMonetizationFormValues:(e,t)=>{i(n=>({...n,[e]:{...n[e],monetizationFormValues:t}}))},setTrackUid:(e,t)=>{i(n=>({...n,[e]:{...n[e],trackUid:t}}))},monetizationFormMethods:l,removeRequest:e=>{i(t=>Object.fromEntries(Object.entries(t).filter(t=>{let[n]=t;return n!==e})))}},children:t})},h=()=>(0,o.useContext)(f),b=()=>(0,m.Gc)()},20613:function(e,t,n){"use strict";n.d(t,{T:function(){return p}});var r=n(35979),a=n(49971),o=n(7384),i=n(77586),l=n(80143),s=n(27505),u=n(69592),c=n(62089),d=n(95762);let p=()=>{let{meUser:e}=(0,u.a)(),[t,n]=(0,a.useState)(!1),p=(0,c.kd)(),m=(0,o.xw)(e);return{onPlanPickerSeen:(0,a.useCallback)(()=>{switch(m){case d.PlanPickerType.FIRST_UPLOAD:(0,o.WB)(o.hH.FIRST_UPLOAD);break;case d.PlanPickerType.THIRD_UPLOAD:(0,o.WB)(o.hH.THIRD_UPLOAD)}},[m]),onFreePlanSelected:(0,a.useCallback)(()=>{l.A.primary((0,r.jsx)(s.Lingua,{t:"You picked [[planName]]. Great choice! Now back to uploading.",values:{planName:p.getNameVariants(i.xC.CREATOR_SUBSCRIPTION_FREE).short}}))},[p]),isCheckoutModalOpen:t,setIsCheckoutModalOpen:n,planPickerType:m}}},54022:function(e,t,n){"use strict";n.r(t),n.d(t,{CheckoutActions:function(){return r.CheckoutActions},CheckoutModal:function(){return r.B},CheckoutModalType:function(){return r.G},PlanPickerType:function(){return r.PlanPickerType}});var r=n(95762)},95614:function(e,t,n){"use strict";n.r(t),n.d(t,{LocalPlayButton:function(){return c}});var r=n(35979),a=n(83703),o=n(98694),i=n(6261),l=n(67675),s=n(27505),u=n(57961);let c=e=>{let{LoadingIcon:t=o.Z,PauseIcon:n=i.Z,PlayIcon:c=l.Z,file:d,fileUrl:p,...m}=e,g=(0,s.o_)(),{player:f,play:v,isPlaying:h,isLoading:b}=(0,u.useLocalPlayer)({file:d,fileUrl:p});return(0,r.jsx)(a.default,{"aria-label":h?g.t("Pause"):g.t("Play"),color:"primary",disabled:!p,onClick:e=>{e.preventDefault(),e.stopPropagation(),h?f.pause():v()},...m,children:b?(0,r.jsx)(t,{}):h?(0,r.jsx)(n,{}):(0,r.jsx)(c,{})})}},57961:function(e,t,n){"use strict";n.r(t),n.d(t,{LocalPlayerProvider:function(){return g},useLocalPlayer:function(){return f}});var r=n(35979),a=n(24509),o=n(14250),i=n(18471),l=n(70677),s=n(53241),u=n(49971),c=n(99193),d=n(99346);let p=["mp3","wav"],m=(0,u.createContext)({isPlaying:!1,isLoading:!1,player:(0,d.d)(),setActiveFile:()=>Promise.reject("Cannot use setActiveFile outside LocalPlayerProvider")}),g=e=>{let{children:t}=e,{convertToWAV:n}=(0,o.A)(),[g,f]=(0,u.useState)(),[v,h]=(0,u.useState)(!1),[b,x]=(0,u.useState)((0,d.d)()),S=(0,c.i)(b),w=(0,u.useCallback)(async e=>{let{file:t,fileUrl:r}=e;b.kill();let o=(0,a.m)(t.name),u=p.includes(o);u||h(!0),f({file:t,fileUrl:r});let c=new l.HTML5Player({url:u?r:await n(t),format:{mimeType:`audio/${u?o:"wav"}`}},{logger:i.logger.noOpLogger});return c.onPlay.subscribe(()=>{s.J.isAudioPlaying()&&s.J.pause()}),x(c),u||h(!1),c},[n,b]),A=(0,u.useMemo)(()=>({player:b,isPlaying:S,isLoading:v,activeFile:g,setActiveFile:w}),[b,S,g,w,v]);return(0,u.useEffect)(()=>()=>{b.kill()},[b]),(0,r.jsx)(m.Provider,{value:A,children:t})},f=e=>{let{file:t,fileUrl:n}=e,{player:r,isPlaying:a,isLoading:o,activeFile:i,setActiveFile:l}=(0,u.useContext)(m),s=!!n&&i?.fileUrl===n,c=async()=>{if(s)r.isDead()||await r.play();else if(t&&n){let e=await l({file:t,fileUrl:n});await e.play()}},d=async e=>{if(s)r.isDead()||await r.seek(e);else if(t&&n){let r=await l({file:t,fileUrl:n});await r.seek(e)}};return{player:r,isPlaying:a&&s,isLoading:o&&s,play:c,seek:d}}},2360:function(e,t,n){"use strict";n.d(t,{RI:function(){return r.LocalPlayButton},b3:function(){return a.useLocalPlayer}});var r=n(95614),a=n(57961)},71826:function(e,t,n){"use strict";n.d(t,{AK:function(){return o},I9:function(){return p},NX:function(){return l},X5:function(){return m},Yu:function(){return a},b$:function(){return u},d9:function(){return g},o5:function(){return c},qR:function(){return d}});let r=(e,t,n)=>Math.max(t,Math.min(n,e)),a=(e,t,n,a)=>{let{startX:o,startOffset:i,width:l}=a,s=r((n-o)/l*e+i,0,e-t),u=r(s+t,t,e);return{start:s,end:u}},o=e=>.00375*e,i=e=>e/.00375,l=(e,t,n,a)=>{let o=t.end-t.start,l=e-(t.end-t.start),s=a-n,u=i(Math.abs(s)),c=r(s<0?-u:u,0,l);return{start:c,end:c+o}},s=()=>{let e=Array(3600);for(let t=0;t<3600;++t)e[t]=Math.round(15*Math.sin(t/3600*Math.PI*10)+105);return e},u=(()=>{let e=s();return{samples:e,width:e.length,height:Math.max(...e)}})(),c=2e4,d=(e,t)=>{let n=t<c;return{currentTime:n?0:e,ended:!1,mediaDuration:t,muted:!1,paused:n,seeking:!1,duration:t}},p=(e,t)=>void 0!==e&&48>Math.floor(t*e),m=()=>{if("undefined"==typeof document)return;let e=new Image(0,0);return e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",e},g={start:0,end:2e4}},99517:function(e,t,n){"use strict";n.r(t),n.d(t,{MetadataFormProvider:function(){return d},useMetadataFormContext:function(){return p}});var r=n(35979),a=n(52214),o=n(50120),i=n(96040),l=n(69592),s=n(57266),u=n(71826);let c={albumType:"album",apiStreamable:!0,commentable:!0,description:"",downloadable:!1,embeddable:!0,explicit:!1,feedable:!0,geoBlocking:{geoBlockingValue:s.bF.Worldwide,exclusiveRegions:[],blockedRegions:[]},isrc:null,labelName:"",licensingAttribution:!1,licensingLicense:"all-rights-reserved",licensingNonCommercial:!1,licensingNonDerivatives:!1,licensingShareAlike:!1,no_offline_sync:!0,permalink:"",pLineForDisplay:null,preview:u.d9,primaryGenre:"",privacy:i.M.Public,publisher:null,purchaseUrl:null,releaseDate:new Date,revealComments:!0,revealStats:!0,tags:[],title:"",trackList:[]},d=e=>{let{children:t,defaultValues:n=c}=e,{meUser:i}=(0,l.a)(),u=(0,o.cI)({resolver:(0,a.F)(s.Kn,{},{mode:"sync"}),defaultValues:{...n,artist:i?.me?.username??""},mode:"onBlur"});return(0,r.jsx)(o.RV,{...u,children:t})},p=()=>(0,o.Gc)()},57266:function(e,t,n){"use strict";n.d(t,{Kn:function(){return _},Mo:function(){return I},bF:function(){return a},ix:function(){return D},jM:function(){return M},xY:function(){return O}});var r,a,o=n(71826),i=n(96040),l=n(81881),s=n(67580),u=n(72045),c=n(44547),d=n(69124);let p=(0,u.J)(),m=/^[0-9a-z_-]+$/,g=/^([a-z\d]+)([-_][a-z\d]+)*$/,f=/\D+/,v=["albums","comments","favorites","followers","following","likes","reposts","sets","stats","tracks"],h=["new","download","favourites","reset-secret-link","widget"],b=l.z.string().or(l.z.literal("")).superRefine((e,t)=>{e&&!m.test(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.TRACK_FORMAT}),e&&!f.test(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.NON_DIGIT}),v.includes(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.RESERVED})}),x=l.z.string().min(1).superRefine((e,t)=>{g.test(e)||t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.ALBUM_FORMAT}),f.test(e)||t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.NON_DIGIT}),h.includes(e)&&t.addIssue({code:l.z.ZodIssueCode.custom,message:s.a8.RESERVED})}),S=l.z.string().min(1),w=l.z.string().nullable(),A=l.z.array(l.z.string()),k=l.z.string().min(0).max(4e3),C=l.z.nativeEnum(i.M),z=l.z.nativeEnum(c.FI).optional(),I=l.z.date().refine(e=>e>p),E=l.z.object({start:l.z.number(),end:l.z.number()}),F=l.z.object({downloadable:l.z.boolean().optional(),no_offline_sync:l.z.boolean().optional(),feedable:l.z.boolean().optional(),embeddable:l.z.boolean().optional(),apiStreamable:l.z.boolean().optional()}),P=l.z.object({commentable:l.z.boolean().optional(),revealComments:l.z.boolean().optional(),revealStats:l.z.boolean().optional()}),y=l.z.object({type:l.z.literal("country").or(l.z.literal("continent")),value:l.z.string().optional(),code:l.z.string().or(l.z.null()),continent:l.z.string().optional()});(r=a||(a={})).Worldwide="worldwide",r.Exclusive="exclusiveRegions",r.Blocked="blockedRegions";let U=l.z.object({geoBlockingValue:l.z.nativeEnum(a),exclusiveRegions:l.z.array(y),blockedRegions:l.z.array(y)}),R=l.z.object({title:S,trackPermalink:b.optional(),albumPermalink:x.optional(),artist:l.z.string().min(1),primaryGenre:w,tags:A,description:k.optional(),privacy:C,scheduledDate:I.optional()}),j=l.z.object({purchaseUrl:l.z.literal("").or(l.z.string().url()).or(l.z.null()).optional(),purchaseTitle:l.z.literal("").or(l.z.string()).or(l.z.null()).optional(),labelName:l.z.string().optional(),releaseDate:l.z.date().optional(),publisher:l.z.string().or(l.z.null()).optional(),isrc:l.z.literal("").or(d.b).or(l.z.null()).optional(),explicit:l.z.boolean().optional(),pLineForDisplay:l.z.string().or(l.z.null()).optional(),licensingLicense:l.z.string().optional(),licensingAttribution:l.z.boolean().optional(),licensingNonCommercial:l.z.boolean().optional(),licensingNonDerivatives:l.z.boolean().optional(),licensingShareAlike:l.z.boolean().optional(),geoBlocking:U,accessSettings:F.optional(),engagementPrivacy:P.optional(),commentable:l.z.boolean().optional(),revealComments:l.z.boolean().optional(),revealStats:l.z.boolean().optional(),downloadable:l.z.boolean().optional(),no_offline_sync:l.z.boolean().optional(),feedable:l.z.boolean().optional(),embeddable:l.z.boolean().optional(),apiStreamable:l.z.boolean().optional(),artist:l.z.string().min(1),preview:E.optional()}),L=l.z.object({firstFansPreEnrollments:z}),T=j.merge(R).merge(L),N=l.z.object({localId:l.z.string().uuid()}).merge(T.omit({trackPermalink:!0,albumPermalink:!0})),_=l.z.object({trackList:l.z.array(N)}).merge(T),M=j.merge(l.z.object({title:S,permalink:b,primaryGenre:w,tags:A,description:k.optional(),privacy:C,scheduledDate:I.optional(),replacingUid:l.z.string().optional(),replacingOriginalFilename:l.z.string().optional()}));l.z.object({title:S,permalink:b,primaryGenre:w,tags:A,description:k.optional(),privacy:C,scheduledDate:I.optional(),purchaseUrl:l.z.literal("").or(l.z.string().url()).or(l.z.null()),purchaseTitle:l.z.literal("").or(l.z.string()).or(l.z.null()),labelName:l.z.string().optional(),albumType:l.z.string().optional(),trackList:l.z.array(N),licensingLicense:l.z.string().optional(),licensingAttribution:l.z.boolean().optional(),licensingNonCommercial:l.z.boolean().optional(),licensingNonDerivatives:l.z.boolean().optional(),licensingShareAlike:l.z.boolean().optional(),releaseDate:l.z.date().optional(),artist:l.z.string().min(1)});let D={title:"",tags:[],permalink:"",primaryGenre:"",description:"",privacy:i.M.Public,scheduledDate:void 0,downloadable:!1,commentable:!0,revealComments:!0,revealStats:!0,no_offline_sync:!0,feedable:!0,embeddable:!0,apiStreamable:!0,replacingUid:"",replacingOriginalFilename:"",licensingLicense:"",licensingAttribution:!1,licensingNonCommercial:!1,licensingNonDerivatives:!1,licensingShareAlike:!1,geoBlocking:{geoBlockingValue:"worldwide",exclusiveRegions:[],blockedRegions:[]},releaseDate:void 0,purchaseUrl:"",purchaseTitle:"",labelName:"",publisher:"",isrc:"",explicit:!1,pLineForDisplay:"",artist:"",preview:{start:o.d9.start,end:o.d9.end}},O=["artist","description","privacy","scheduledDate","tags","purchaseUrl","purchaseTitle","labelName","primaryGenre","licensingLicense","licensingAttribution","licensingNonCommercial","licensingNonDerivatives","licensingShareAlike","downloadable","embeddable","feedable","apiStreamable","no_offline_sync"]},72045:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r=()=>{let e=new Date;return e.setMinutes(e.getMinutes()+1),e}},2950:function(e,t,n){"use strict";n.d(t,{$E:function(){return r.useMetadataFormContext},jM:function(){return a.jM}});var r=n(99517),a=n(57266)},67580:function(e,t,n){"use strict";n.d(t,{ME:function(){return l},Xi:function(){return s},a8:function(){return a}});var r,a,o=n(68430),i=n.n(o);(r=a||(a={})).TRACK_FORMAT="TRACK_FORMAT",r.ALBUM_FORMAT="ALBUM_FORMAT",r.NON_DIGIT="NON_DIGIT",r.RESERVED="RESERVED",r.IN_USE="IN_USE",r.UNKNOWN="UNKNOWN";let l=e=>i()(e).toLowerCase().replace(/\s/g,"-").replace(/[^a-z0-9_-]+/g,"").replace(/^[_-]+|[_-]+$/g,"").replace(/([-_])[-_]+/g,"$1").replace(/^[^a-z]+$/,"$&a"),s=e=>{let t="https://soundcloud.com/";return e?.startsWith(t)?e.split(t)[1]:""}},78813:function(e,t,n){"use strict";n.d(t,{n6:function(){return _},kJ:function(){return M},JF:function(){return Q},rb:function(){return $},NW:function(){return H}});var r,a,o=n(35979),i=n(60251),l=n(70793),s=n(21395),u=n(68512),c=n(76454),d=n(86480),p=n(49092),m=n(1637),g=n(49971),f=n(68216),v=e=>(0,o.jsx)(f.Z,{...e,viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M1.5 8c0-3.58985 2.91015-6.5 6.5-6.5 3.5899 0 6.5 2.91015 6.5 6.5 0 3.5899-2.9101 6.5-6.5 6.5-3.58985 0-6.5-2.9101-6.5-6.5ZM8 6c.55228 0 1-.44772 1-1s-.44772-1-1-1-1 .44772-1 1 .44772 1 1 1Zm.75 1.25h-1.5v4.5h1.5v-4.5Z",fill:"currentColor"})}),h=n(65153),b=n(27505),x=n(62089),S=n(45523),w=n.n(S);function A(e){let{uploadProgress:t,height:n=8}=e;return(0,o.jsx)("div",{className:"dgdqh4a",children:(0,o.jsx)(m.Z,{variant:"determinate",value:t,sx:e=>({height:n,flex:1,backgroundColor:"transparent","& .MuiLinearProgress-bar":{backgroundColor:e.vars.palette.success.main}})})})}n(17335),n(79710),n(96703),n(64437),n(31375);var k=n(5844),C=n(36425),z=n(5522),I=n(68642),E=n(11258),F=n(2360),P=n(54022),y=n(68365),U=n(46099),R=n(90793),j=n(67652),L=n(50681);let T=(0,y.default)(()=>Promise.resolve().then(n.bind(n,54022)).then(e=>e.CheckoutModal),{loadableGenerated:{webpack:()=>[54022]}});function N(e){let{file:t,isProgressing:n}=e,{isInWebView:r}=(0,U.B)(),a=r&&n?(0,o.jsx)(b.Lingua,{t:"Wait! Keep the app open to complete."}):t?.name;return(0,o.jsx)(s.default,{variant:"subtitle1",sx:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a})}function _(e){let{className:t,localId:n,onClickReplace:r}=e,a=(0,g.useRef)(null),[c,d]=(0,g.useState)(!1),p=(0,k.rS)(),m=(0,L.S)(),{isMultiTrackUpload:f,areTracksWithinQuota:S}=(0,i.i2)(),C=(0,k.a)(()=>{p.track("Upload Funnel Component Viewed",{component_id:"Over Quota",component_number:5,is_multi_track:f,is_voice_recorder_visible:!1,view_type:m})}),{getFileByLocalId:z}=(0,i.jX)(),I=z(n),{uploadStatus:E}=I??{uploadStatus:i.Dm.none},F=(0,l.Ln)(E),{isInWebView:y}=(0,U.B)(),R=!S||(0,l.gO)({uploadStatus:E}),_=I?.uploadStatus===i.Dm.transcodeStarted;return(0,g.useEffect)(()=>{_&&p.track("Upload Succeeded",{track_urn:"",is_public:!1,view_type:m})},[_,p]),(F||_||R)&&I?(0,o.jsxs)("div",{className:t||"dgdqh40",children:[(0,o.jsxs)("div",{className:w()("dgdqh41",{dgdqh45:R,dgdqh46:!R&&_&&!y,dgdqh47:!R&&_&&y,dgdqh42:S}),children:[R?(0,o.jsx)(v,{className:"dgdqh49",width:24,height:24}):_?(0,o.jsx)(h.Z,{className:"dgdqh48",width:24,height:24}):null,S?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(N,{file:I.file,isProgressing:F}),(_||R)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.z,{multiple:!1,onSelectFiles:e=>{r(e[0])},ref:a}),(0,o.jsx)(u.Z,{variant:"text",size:"medium",onClick:()=>{a.current?.selectFiles()},children:(0,o.jsx)(b.Lingua,{t:"Replace track"})})]})]}):(0,o.jsxs)("div",{className:"dgdqh43",ref:C,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(s.default,{variant:"inherit",className:"dgdqh44",children:(0,o.jsx)(b.Lingua,{t:"Over quota"})}),(0,o.jsx)(s.default,{variant:"subtitle1",children:(0,o.jsx)(b.Lingua,{t:"Upgrade to <PlanName />",values:{PlanName:()=>(0,o.jsx)(x.p2,{productId:x.xC.CREATOR_SUBSCRIPTION_3,variant:"short"})}})})]}),(0,o.jsx)(u.Z,{variant:"contained",color:"primary",size:"small",onClick:()=>{d(!0),p.track("Product View Triggered",{upsell_context:"Upload Limit",view_type:m})},children:(0,o.jsx)(b.Lingua,{t:"Get <PlanName />",values:{PlanName:()=>(0,o.jsx)(x.p2,{productId:x.xC.CREATOR_SUBSCRIPTION_3,variant:"short"})}})})]})]}),!_&&!R&&(0,o.jsx)(A,{uploadProgress:I.uploadProgress||0}),(0,o.jsx)(T,{checkoutModalType:P.CheckoutModalType.PURCHASE,config:{isOpen:c,setIsOpen:d,tcode:"t498"}})]}):null}let M=e=>{let{localId:t,onReplaceSelection:n}=e,r=(0,k.rS)(),a=(0,L.S)(),{areTracksWithinQuota:s,isMultiTrackUpload:u}=(0,i.i2)(),{getFileByLocalId:c}=(0,i.jX)(),d=c(t);if(!d)return null;if(!s)return(0,o.jsx)(V,{onEntered:()=>{r.track("Upload Funnel Component Viewed",{component_id:"Over Quota",component_number:5,is_multi_track:u,is_voice_recorder_visible:!1,view_type:a})},onClickUnlock:()=>{r.track("Product View Triggered",{upsell_context:"Upload Limit",view_type:a})}});let p=d.file?.name??d.originalFilename;return(0,l.Ln)(d.uploadStatus)?(0,o.jsx)(q,{trackName:p,uploadProgress:d.uploadProgress}):(0,l.gO)(d)?(0,o.jsx)(W,{track:d,onReplaceSelection:n}):(0,o.jsx)(Z,{track:d,onReplaceSelection:n,onEntered:()=>{r.track("Upload Succeeded",{track_urn:d.urn,is_public:!1,view_type:a})}})},D=e=>{let{children:t,timeout:n=500,...r}=e;return(0,o.jsx)(c.Z,{in:!0,timeout:n,unmountOnExit:!0,...r,children:(0,o.jsx)(d.default,{sx:e=>({alignItems:"center",display:"flex",flexDirection:"row",flexShrink:0,gap:e.spacing(1)}),children:t})})},O=e=>{let{name:t,sx:n,...r}=e;return(0,o.jsx)(s.default,{sx:(0,R.jM)({maxWidth:"28ch",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"fit-content"},n),variant:"caption",...r,children:t})},B=e=>{let{onReplaceSelection:t}=e,n=(0,g.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Z,{size:"medium",variant:"text",onClick:()=>{n.current?.selectFiles()},children:(0,o.jsx)(b.Lingua,{t:"Replace track"})}),(0,o.jsx)(j.z,{multiple:!1,onSelectFiles:e=>{t?.(e[0])},ref:n})]})},Z=e=>{let{track:t,onReplaceSelection:n,onEntered:r,...a}=e,[i,l]=(0,g.useState)(!1);return(0,o.jsxs)(D,{onEntered:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r?.(...t),setTimeout(()=>{l(!0)},2e3)},...a,children:[i?(0,o.jsx)(F.RI,{PauseIcon:C.Z,PlayIcon:z.Z,file:t.file,fileUrl:t.fileUrl,sx:{padding:0}}):(0,o.jsx)(I.Z,{sx:e=>({color:e.vars.palette.success.light})}),(0,o.jsx)(O,{name:t.file?.name??t.originalFilename}),(0,o.jsx)(B,{onReplaceSelection:n})]})},W=e=>{let{track:t,onReplaceSelection:n,...r}=e;return(0,o.jsxs)(D,{...r,children:[(0,o.jsx)(E.Z,{sx:e=>({color:e.vars.palette.error.light})}),(0,o.jsx)(O,{name:t.file?.name??t.originalFilename}),(0,o.jsx)(B,{onReplaceSelection:n})]})},V=e=>{let{onClickUnlock:t,...n}=e,[r,a]=(0,g.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(D,{...n,children:[(0,o.jsx)(E.Z,{sx:e=>({color:e.vars.palette.error.light})}),(0,o.jsx)(s.default,{variant:"caption",sx:e=>({color:e.vars.palette.error.light}),children:(0,o.jsx)(b.Lingua,{t:"You've reached your upload limit."})}),(0,o.jsx)(u.Z,{size:"medium",variant:"text",onClick:()=>{a(!0),t()},children:(0,o.jsx)(b.Lingua,{t:"Unlock with <PlanName />",values:{PlanName:()=>(0,o.jsx)(x.p2,{productId:x.xC.CREATOR_SUBSCRIPTION_3,variant:"short"})}})})]}),(0,o.jsx)(T,{checkoutModalType:P.CheckoutModalType.PURCHASE,config:{isOpen:r,setIsOpen:a,tcode:"t498"}})]})},q=e=>{let{trackName:t,uploadProgress:n,...r}=e;return(0,o.jsxs)(D,{...r,children:[(0,o.jsx)(O,{name:t}),(0,o.jsx)(p.default,{sx:{background:"#DDDDDD url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAAAECAYAAACeP1FKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEKSURBVHgBldQhEoJAFAbgxwzBYCASOYIH8ABEI5FoMBg5gMFo8AAcgAMQCYaNRI9ANBho+N7IOsz6/h12Z97suOu3D9/KiwiMaZr2PJ040sXywFFHUdQCs+OpUkzDpgEm4+nAkSyWR46OjfGY3MkjxrDpAgzNeZBJ52cLNZInW2ticJAt5tbZkgRvj7kAMwCT8VRwbJwt+fwCJvGYMdDQCpMo29o5dgSbWEkuxbwp35XiX/k2H4GmBkYetFSMfQuewJw9xgSa3mNK+i+mNa1ipMhH0i/AeEwRO4vSgirlENuGtGIiIxdwB8kz+v5j3CE/smXTA5MDY0AxkSECrWvRgpJAk1PYBfza1geIzZh6HCCqhAAAAABJRU5ErkJggg==)",borderRadius:4,display:"inline-flex"},children:(0,o.jsx)(m.Z,{value:n,variant:"determinate",sx:e=>({backgroundColor:"transparent",borderTopLeftRadius:4,borderBottomLeftRadius:4,height:4,width:150,"& .MuiLinearProgress-bar":{backgroundColor:e.vars.palette.success.main}})})}),(0,o.jsx)(s.default,{variant:"caption",children:(0,o.jsx)(b.Lingua,{t:"Uploading [[progress]]%",values:{progress:n.toFixed(0)}})})]})};var G=n(10767);(r=a||(a={})).Transcoding="transcoding",r.Uploading="uploading";let $=e=>null!==e.progress&&e.progress<100,H=e=>{let{uploadFiles:t}=(0,i.i2)();return(e&&(t=t.filter(t=>t.urn===e)),t.length<1)?{progress:null,status:null}:t.reduce((e,n)=>({progress:e.progress+n.uploadProgress/t.length,status:(0,l.Ln)(n.uploadStatus)?"uploading":"transcoding",trackCount:e.trackCount,hasUploadError:e.hasUploadError||(0,l.gO)(n)}),{progress:0,status:"uploading",trackCount:t.length,hasUploadError:!1})},Q=e=>{let{children:t,uploadStatus:n,forceOpen:r}=e,i=Math.floor(n.progress);return(0,o.jsx)(G.T,{arrow:!0,head:n.status===a.Uploading?(0,o.jsx)(b.Lingua,{t:"Uploading track ... [[progress]]%",tp:"Uploading tracks ... [[progress]]%",count:n.trackCount,values:{progress:i},comment:"Status message for uploading a track"}):(0,o.jsx)(b.Lingua,{t:"Processing track ... [[progress]]%",tp:"Processing tracks ... [[progress]]%",count:n.trackCount,values:{progress:i},comment:"Status message for processing a track"}),body:(0,o.jsx)(b.Lingua,{t:"Once this upload is complete, you can upload more tracks."}),placement:"bottom",open:r,children:t})}},36608:function(e,t,n){"use strict";n.d(t,{UploadArtworkProvider:function(){return s},useUploadArtworkApi:function(){return c},useUploadArtworkState:function(){return u}});var r=n(35979),a=n(78975),o=n(49971);let i=(0,o.createContext)(null),l=(0,o.createContext)(null),s=e=>{let{children:t}=e,[n,s]=(0,o.useState)(null),{artwork:u,...c}=(0,a.i)(),d=(0,o.useMemo)(()=>({...u,hasArtwork:!!n}),[u,n]),p=(0,o.useMemo)(()=>({...c,onUploadFinish:s}),[c]);return(0,r.jsx)(i.Provider,{value:d,children:(0,r.jsx)(l.Provider,{value:p,children:t})})},u=()=>{let e=(0,o.useContext)(i);if(!e)throw Error("useUploadArtworkState must be used within UploadProvider");return e},c=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useUploadArtworkApi must be used within UploadProvider");return e}},80034:function(e,t,n){"use strict";n.d(t,{UploadDropzoneProvider:function(){return W},G:function(){return D},useUploadDropzoneContext:function(){return O}});var r,a,o=n(35979),i=n(49971),l=n(62172),s=n(27505),u=n(73612);n(37216);var c=(0,n(18226).$)("11fcfb31067fe9f02cd75f3afc07aa75e0a7a034");async function d(e){return await (0,u.y)(c(e))}var p=n(31099),m=n(80143),g=n(80191),f=n(60251),v=n(2950),h=n(5844),b=n(81859),x=n(57266),S=n(18353),w=n(44547);let A=e=>{let{addFile:t,updateFile:n,setFormValue:r,getFormValues:a,setFileAndUpload:o,currentTrackCount:i,goToNextStep:l,addMonetizationRequest:s,meUser:u,hasUnlimitedUploads:c}=e;return async(e,d,p,m)=>{if(0===e.length)return;let g=await (0,S.v)({files:e,meUser:u,hasUnlimitedUploads:c}),v=[],h=e.length>1;if(p instanceof CustomEvent){let e=p.detail.fileIndex,t=p.detail.localId,[a]=g,o=m??a.title,{duration:i,durationDisplay:l,originalFilename:s,fileUrl:u,file:c,lossless:d,quotaUtilization:h,getHeardEligible:b,monetizationEligible:x}=a;n(t,{originalFilename:s,file:c,fileUrl:u,uploadStatus:f.Dm.requested,uploadProgress:0,duration:i,durationDisplay:l,lossless:d,quotaUtilization:h,isReplacingTrack:!0,getHeardEligible:b,monetizationEligible:x,firstFansPreEnrollments:w.FI.NOT_ENROLLED}),r(`trackList.${e}.title`,o),v.push({parsedTrack:a,localId:t,destinationIndex:e})}else g.forEach((e,n)=>{let o=i+n,l=(0,b.Z)(),u=m??e.title,{duration:c,durationDisplay:d,originalFilename:p,fileUrl:g,file:S,lossless:A,quotaUtilization:k,getHeardEligible:C,monetizationEligible:z,artist:I}=e,E=a(x.xY).reduce((e,t,n)=>(e[x.xY[n]]=t,e),{});s(l),r(`trackList.${o}`,{...x.ix,title:u,localId:l,downloadable:!1,artist:I,...E}),h||0!==o||(r("title",u),r("artist",I)),t({originalFilename:p,localId:l,file:S,fileUrl:g,uploadStatus:f.Dm.requested,uploadProgress:0,duration:c,durationDisplay:d,lossless:A,quotaUtilization:k,isReplacingTrack:!1,getHeardEligible:C,monetizationEligible:z,firstFansPreEnrollments:w.FI.NOT_ENROLLED}),v.push({parsedTrack:e,localId:l,destinationIndex:o})});l?.(),v.forEach(e=>{let{parsedTrack:t,localId:n}=e;o(n,t.file)})}};var k=n(2075),C=n(16848),z=n(69592),I=n(20613),E=n(95762),F=n(97686),P=n(85898),y=n(93040),U=n(24509);(r=a||(a={})).CorruptedFile="corrupted-file",r.FileTooLarge="file-too-large",r.FileTooSmall="file-too-small",r.MissingName="missing-name",r.UnsupportedFileType="file-type-unsupported";class R{static #e=this.ALLOWED_EXTENSIONS=["3ga","3gp","aac","aif","aifc","aiff","alac","amr","caf","flac","m4a","mp2","mp3","mp4","ogg","wav","wma"];static #t=this.ALLOWED_MIME_TYPES=["audio"];static #n=this.MAX_FILE_SIZE=4294967296;static #r=this.MIN_FILE_SIZE=0;get maxFileSize(){return R.MAX_FILE_SIZE}get minFileSize(){return R.MIN_FILE_SIZE}validate(e){let t=[];e.name||t.push("missing-name"),void 0===e.size||null===e.size?t.push("corrupted-file"):e.size>=R.MAX_FILE_SIZE?t.push("file-too-large"):e.size<=R.MIN_FILE_SIZE&&t.push("file-too-small");let[n]=e.type?.split("/")??[void 0],r=(0,U.m)(e.name);return R.ALLOWED_EXTENSIONS.includes(r)||R.ALLOWED_MIME_TYPES.includes(n)||t.push("file-type-unsupported"),[!t.length,t]}}let j=new R;var L=n(46099),T=n(50681);let N=(0,i.createContext)(null),_={[a.CorruptedFile]:e=>e.t("File type is not supported."),[a.FileTooLarge]:e=>e.t("File is too large. Max file size is 4GB."),[a.FileTooSmall]:e=>e.t("File is too small."),[a.MissingName]:e=>e.t("File type is not supported."),[a.UnsupportedFileType]:e=>e.t("File type is not supported.")},M=e=>t=>{let[n,r]=j.validate(t);return n?null:r.map(t=>({code:t,message:_[t](e)}))},D=(e,t,n)=>async(r,a)=>{t.track("Upload Step Initiated",{step_name:"Transcoding",view_type:n});try{await d(r),e(a,{uploadProgress:100,uploadStatus:f.Dm.transcodeStarted})}catch(t){e(a,{uploadStatus:f.Dm.transcodeFailed}),(0,p.z)()}},O=()=>{let e=(0,i.useContext)(N);if(!e)throw Error("useUploadDropzoneContext must be used within UploadDropzoneProvider");return e},B=e=>{let{children:t}=e,{getInputProps:n}=O();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{...n()}),t]})},Z=()=>{let[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(0);return(0,i.useEffect)(()=>{let e=e=>{e.preventDefault(),e.stopPropagation()},r=e=>{e.preventDefault(),e.stopPropagation(),n.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&t(!0)},a=e=>{e.preventDefault(),e.stopPropagation(),n.current--,n.current>0||t(!1)},o=e=>{e.preventDefault(),e.stopPropagation(),t(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(n.current=0,e.dataTransfer.clearData())};return window.addEventListener("dragenter",r),window.addEventListener("dragleave",a),window.addEventListener("dragover",e),window.addEventListener("drop",o),function(){window.removeEventListener("dragenter",r),window.removeEventListener("dragleave",a),window.removeEventListener("dragover",e),window.removeEventListener("drop",o)}},[]),e},W=e=>{let{children:t}=e,{isFirstStep:n,nextStep:r,reset:a}=(0,C.C)(),[,u]=(0,i.useTransition)(),{updateFile:c,addFile:d,reset:b}=(0,f.jX)(),{addRequest:x,setTrackUid:S}=(0,F.o)(),{uploadFiles:w}=(0,f.i2)(),{setValue:U,getValues:R}=(0,v.$E)(),j=(0,s.o_)(),_=Z(),{addTask:O}=function(e){let[t,n]=(0,i.useState)({numRunning:0,tasks:[]});return(0,i.useEffect)(()=>{(async function(){if(0===t.tasks.length||3===t.numRunning)return;let[e]=t.tasks;n(e=>({numRunning:e.numRunning+1,tasks:e.tasks.slice(1)})),await e(),n(e=>({...e,numRunning:e.numRunning-1}))})()},[t,3]),{tasks:t.tasks,addTask:(0,i.useCallback)(e=>{n(t=>({...t,tasks:[...t.tasks,e]}))},[])}}(0),W=(0,h.rS)(),V=(0,k.b)("unlimited_uploads"),{meUser:q}=(0,z.a)(),G=(0,T.S)(),$=D(c,W,G),H=(0,g.M)({updateFile:c,transcodeTrack:$,tracking:W,view_type:G,updateMonetizationRequestUid:S}),{onPlanPickerSeen:Q,onFreePlanSelected:Y,isCheckoutModalOpen:X,setIsCheckoutModalOpen:K,planPickerType:J}=(0,I.T)(),{isInWebView:ee}=(0,L.B)(),et=A({addFile:d,updateFile:c,setFormValue:U,getFormValues:R,setFileAndUpload:function(e,t){O(async()=>{await new Promise(r=>{u(async()=>{try{await H(t,e)}catch(t){n?((0,p.z)(),b(),a()):c(e,{uploadStatus:f.Dm.failed,uploadProgress:0})}finally{r()}})})})},currentTrackCount:w.length,goToNextStep:function(){n&&r()},addMonetizationRequest:x,meUser:q,hasUnlimitedUploads:V});!function(e){let{isUploadInProgress:t,uploadFiles:n}=e,r=(0,y.i)(),a=i.useRef(new WeakSet);(0,i.useEffect)(()=>{let e=r.filter(e=>!a.current.has(e));e.length>0&&!t&&(n(e),P.y.pendingUploadFiles.reset(),e.forEach(e=>a.current.add(e)))},[r,t,n])}({isUploadInProgress:w.length>0,uploadFiles:e=>void et(e,[],new Event("drop"))});let en=(0,l.uI)({useFsAccessApi:!1,noClick:!0,onDrop:(e,t,n)=>{let r="drop"===n.type;if(r&&void 0!=J){K(!0);return}et(e,t,n);let a=e.length>0,o=t.length>0;a&&o&&m.A.error(j.t("Invalid files have been filtered out")),W.track("Upload Started",{location_context:"Start Page",is_drag_n_drop:r,view_type:G})},validator:M(j),maxFiles:ee?1:0,onFileDialogCancel:()=>{W.track("Upload Canceled",{view_type:G})},onDropRejected:e=>{W.track("Upload Failed",{reason:e[0].errors.map(e=>e.message).join(", "),view_type:G})}}),er=w.some(e=>!e.uid),ea=(0,i.useMemo)(()=>{let{acceptedFiles:e,getRootProps:t,getInputProps:n,fileRejections:r,isDragActive:a,isFocused:o,open:i}=en;return{acceptedFiles:e,getRootProps:t,getInputProps:n,fileRejections:r,isDragActive:a,addNewFiles:i,replaceFileOnTrack:async(e,t,n)=>{let r=new CustomEvent("replaceFileEvent",{detail:{fileIndex:t,localId:n}});await et([e],[],r)},uploadRecordedFile:async(e,t)=>{await et([e],[],new Event("drop"),t)},isFocused:o,isDragging:_,isLoading:er}},[en,er,_,et]);return(0,o.jsxs)(N.Provider,{value:ea,children:[(0,o.jsx)(B,{children:t}),J&&(0,o.jsx)(E.B,{checkoutModalType:E.G.INLINE_PLAN_PICKER,config:{isOpen:X,setIsOpen:K,tcode:"t500",onCheckoutClose:Q,planPickerType:J,onFreePlanSelected:Y}})]})}},70793:function(e,t,n){"use strict";n.d(t,{UploadFilesProvider:function(){return m},UploadStatus:function(){return a},QY:function(){return S},gO:function(){return b},fT:function(){return x},Ln:function(){return h},useUploadFilesApi:function(){return f},useUploadFilesState:function(){return g}});var r,a,o=n(35979),i=n(49971);let l=e=>1>=e.reduce((e,t)=>e+t.quotaUtilization,0);var s=n(69223),u=n(16848);(r=a||(a={})).none="none",r.queued="queued",r.requested="requested",r.uploading="uploading",r.finished="finished",r.failed="failed",r.canceled="canceled",r.uploaded="uploaded",r.transcodeStarted="transcodeStarted",r.transcodeFailed="transcodeFailed";let c=[],d=(0,i.createContext)({uploadFiles:[],isMultiTrackUpload:!1,urns:[],areTracksWithinQuota:!0}),p=(0,i.createContext)({addFile:()=>{},updateFile:()=>{},removeFile:()=>{},getFileByLocalId:()=>null,reset:()=>{},setIsInForeground:()=>void 0,setIsMultiTrackUpload:()=>void 0,setUrns:()=>void 0}),m=e=>{var t;let{children:n}=e,[r,a]=(0,i.useState)(c),[s,m]=(0,i.useState)(!1),[g,f]=(0,i.useState)([]),[b,x]=(0,i.useState)(!1),w=l(r),{resetFinishedFiles:A}=v(r,b),{reset:k}=(0,u.C)(),C=(0,i.useCallback)(e=>{a(t=>[...t,e])},[]),z=(0,i.useCallback)((e,t)=>{a(n=>{if(0===n.length||"canceled"===t.uploadStatus)return n;let r=n.findIndex(t=>t.localId===e);if(-1===r)return n;let a=n[r],o=[...n];return o[r]={...a,...t},o})},[]),I=(0,i.useCallback)(e=>r.find(t=>t.localId===e)??null,[r]),E=(0,i.useCallback)(()=>{a(c),A(),k()},[A,k]),F=(0,i.useCallback)(e=>{a(t=>t.filter(t=>t.localId!==e))},[]);(0,i.useEffect)(()=>{r.length>0&&r.every(S)&&!b&&E()},[r,b,E]),(0,i.useEffect)(()=>{!s&&r.length>1&&m(!0)},[r,s]),(0,i.useEffect)(()=>{w||r.forEach(e=>{"canceled"!==e.uploadStatus&&e.cancelUpload?.()})},[r,w]),t=()=>r.some(e=>h(e.uploadStatus)||!S(e)),(0,i.useEffect)(()=>{let e=e=>{(!t||t())&&e.preventDefault()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t]);let P=(0,i.useMemo)(()=>({addFile:C,updateFile:z,removeFile:F,reset:E,setIsInForeground:x,getFileByLocalId:I,setIsMultiTrackUpload:m,setUrns:f}),[C,F,E,z,I,f]);return(0,o.jsx)(d.Provider,{value:{uploadFiles:r,isMultiTrackUpload:s,urns:g,areTracksWithinQuota:w},children:(0,o.jsx)(p.Provider,{value:P,children:n})})},g=()=>(0,i.useContext)(d),f=()=>(0,i.useContext)(p),v=(e,t)=>{let n=(0,i.useRef)(new Set),r=(0,s.Z)({debounce:!0});return(0,i.useEffect)(()=>{let a=!1;e.forEach(e=>{S(e)&&!n.current.has(e.localId)&&(n.current.add(e.localId),a=!0)}),a&&!t&&r()},[e,r,t]),{resetFinishedFiles:(0,i.useCallback)(()=>{n.current=new Set},[])}},h=e=>["requested","queued","uploading"].includes(e),b=e=>["failed","transcodeFailed"].includes(e.uploadStatus),x=e=>{let{uploadStatus:t}=e;return h(t)||"uploaded"===t},S=e=>{let{uploadStatus:t}=e;return"transcodeStarted"===t}},16848:function(e,t,n){"use strict";n.d(t,{C:function(){return d},I:function(){return a},UploadStepProvider:function(){return c}});var r,a,o=n(35979),i=n(49971),l=n(93040);(r=a||(a={})).UPLOAD="UPLOAD",r.WAITING_FOR_FILES="WAITING_FOR_FILES",r.INFO="INFO",r.SUCCESS="SUCCESS",r.DISTRIBUTE="DISTRIBUTE";let s={UPLOAD:{previous:void 0,next:"INFO"},WAITING_FOR_FILES:{previous:void 0,next:"INFO"},INFO:{previous:"UPLOAD",next:"SUCCESS"},SUCCESS:{previous:"INFO",next:"DISTRIBUTE"},DISTRIBUTE:{previous:"SUCCESS",next:void 0}},u=(0,i.createContext)(null),c=e=>{let{children:t}=e,[n,r]=(0,i.useState)("UPLOAD"),a=(0,l.i)();(0,i.useEffect)(()=>{a.length>0&&"UPLOAD"===n&&r("WAITING_FOR_FILES")},[a,n]);let s=(0,i.useMemo)(()=>({currentStep:n,setCurrentStep:r}),[n,r]);return(0,o.jsx)(u.Provider,{value:s,children:t})},d=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useUploadSteps must be used within an UploadStepProvider");let{currentStep:t,setCurrentStep:n}=e,r=()=>{document.querySelector("#uploadHeader")?.scrollIntoView()};return{isFirstStep:!s[t].previous,currentStep:t,setCurrentStep:n,previousStep:()=>{let e=s[t].previous;e&&(n(e),r())},nextStep:()=>{let e=s[t].next;e&&(n(e),r())},reset:()=>{n("UPLOAD")}}}},60251:function(e,t,n){"use strict";n.d(t,{Dm:function(){return o.UploadStatus},wf:function(){return r.useUploadArtworkApi},nT:function(){return r.useUploadArtworkState},KP:function(){return a.useUploadDropzoneContext},jX:function(){return o.useUploadFilesApi},i2:function(){return o.useUploadFilesState}}),n(35979);var r=n(36608),a=n(80034);n(97686);var o=n(70793)},31099:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(35979),a=n(27505),o=n(80143);let i=()=>{o.A.error((0,r.jsx)(a.Lingua,{t:"Something went wrong while uploading your track. Please try again."}))}},80191:function(e,t,n){"use strict";n.d(t,{M:function(){return d}});var r=n(24267),a=n(60251),o=n(73612);n(37216);var i=(0,n(18226).$)("152d4c44a1adc711cbd4b9acb1066b8938e4910e");async function l(e,t){return await (0,o.y)(i(e,t))}let s=["Content-Length","Host","Expect"],u=e=>{let{uploadPolicyHeaders:t,trackFileType:n}=e,r=[["Content-Type",n]];for(let{key:e,value:n}of t)e&&n&&!s.includes(e)&&r.push([e,n]);return Object.fromEntries(r)};var c=n(31099);let d=e=>{let{updateFile:t,transcodeTrack:n,tracking:o,view_type:i,updateMonetizationRequestUid:s}=e;return async(e,d)=>{let p=await l(e.name,e.size),m=new AbortController;t(d,{uid:p.uid,uploadStatus:a.Dm.uploading,uploadProgress:0,cancelUpload:()=>{m.abort()}}),s&&s(d,p.uid);let g={onUploadProgress(e){void 0!==e.total&&t(d,{uploadProgress:Math.round(100*e.loaded/e.total)})},headers:u({uploadPolicyHeaders:p.headers,trackFileType:e.type}),signal:m.signal};o.track("Upload Step Initiated",{step_name:"Upload to S3",view_type:i}),r.Z.put(p.url,e,g).then(e=>{200===e.status&&(t(d,{uploadStatus:a.Dm.uploaded}),o.track("Upload Step Completed",{step_name:"Upload to S3",view_type:i}),n(p.uid,d))}).catch(e=>{r.Z.isCancel(e)?t(d,{uploadStatus:a.Dm.canceled}):(t(d,{uploadStatus:a.Dm.failed,uploadProgress:0}),(0,c.z)())})}}},46099:function(e,t,n){"use strict";n.d(t,{B:function(){return c},WebViewProvider:function(){return d},h:function(){return o}});var r,a,o,i=n(35979),l=n(49971);(a||(a={})).iOS="ios",(r=o||(o={})).closeUpload="closeUpload",r.iapCheckout="iapCheckout";let s=e=>{let{messageType:t,messagePayload:n}=e;console.info(`[Webi WebView] -- sending ${t} event`),window.webkit?.messageHandlers?.[t]?.postMessage(n)},u=(0,l.createContext)({isInWebView:!1,webViewClient:null,sendWebViewMessage:s}),c=()=>(0,l.useContext)(u),d=e=>{let{webViewInfo:t,children:n}=e,r=(0,l.useMemo)(()=>({...t,sendWebViewMessage:s}),[t]);return(0,i.jsx)(u.Provider,{value:r,children:n})}},99346:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(18471),a=n(70677);let o=()=>{let e=new a.HTML5Player({format:{},url:""},{logger:r.logger.noOpLogger});return e.kill(),e}},93040:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(49971),a=n(12902);let o=[];function i(){return(0,r.useSyncExternalStore)(e=>a.y.pendingUploadFiles.subscribe(e),()=>a.y.pendingUploadFiles.getFiles(),()=>o)}},2075:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(49971),a=n(69592);let o=e=>{let t=(0,r.useContext)(a.V);return(t.meUser?.me?.features??[]).includes(e)}},24509:function(e,t,n){"use strict";n.d(t,{H:function(){return a},m:function(){return r}});let r=e=>{if(!e)return"";let t=e.split(/[\\/]/).pop();if(!t)return"";let n=t.lastIndexOf(".");return n<1?"":t.slice(n+1)},a=e=>{let t=r(e);return t?e.slice(0,-t.length-1):e}},18353:function(e,t,n){"use strict";n.d(t,{i:function(){return s},v:function(){return l}});var r=n(77041),a=n(1266),o=n(24509),i=n(84195);let l=async e=>{let{files:t,meUser:n,hasUnlimitedUploads:r}=e;return await Promise.all(t.map(e=>s({file:e,meUser:n,hasUnlimitedUploads:r})))},s=async e=>{let{file:t,meUser:n,hasUnlimitedUploads:l}=e,s=!1,u=!1,c={file:t,originalFilename:t.name,fileUrl:URL.createObjectURL(t),title:(0,o.H)(t.name),duration:1,durationDisplay:(0,i.y)(1),quotaUtilization:0,lossless:!1,getHeardEligible:s,monetizationEligible:u,artist:n?.me?.username??""};try{let e=await (0,a.Aj)(t,{duration:!0}),r=e.format.duration??1,o=e.common.artist??n?.me?.username??"",d=0;if(u=s=r>=30&&r<=600,!l&&"number"==typeof n?.me?.uploadQuota?.secondsUploaded&&"number"==typeof n?.me?.uploadQuota?.secondsLimit&&n?.me?.uploadQuota?.secondsUploaded>=0&&n?.me?.uploadQuota?.secondsLimit>=0&&n.me.uploadQuota.secondsLimit>=n.me.uploadQuota.secondsUploaded){let{secondsUploaded:e,secondsLimit:t}=n.me.uploadQuota;d=r/(t-e)}return{...c,duration:r,durationDisplay:(0,i.y)(e.format.duration??1),quotaUtilization:d,lossless:e.format.lossless??!1,getHeardEligible:s,monetizationEligible:u,artist:o}}catch(e){return(0,r.Tb)(e),c}}},69124:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(81881);let a=RegExp("^[A-Z]{2}[A-Z0-9]{3}[0-9]{2}[0-9]{5}$"),o=r.z.string().length(12).regex(a)},84195:function(e,t,n){"use strict";function r(e){let t=Math.floor(e/3600).toString(),n=Math.floor(e%3600/60).toString(),r=Math.floor(e%60).toString().padStart(2,"0");return"0"===t?`${n}:${r}`:`${t}:${n.padStart(2,"0")}:${r}`}n.d(t,{y:function(){return r}})},96040:function(e,t,n){"use strict";n.d(t,{M:function(){return a},b:function(){return i}});var r,a,o=n(44547);(r=a||(a={})).FollowersOnly="FollowersOnly",r.Public="Public",r.Private="Private",r.Scheduled="Scheduled";let i={Public:o.M0.PUBLIC,FollowersOnly:o.M0.PRIVATE_FOLLOWS,Private:o.M0.PRIVATE,Scheduled:o.M0.PRIVATE}},14250:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(10073),a=n(34087),o=n(49971),i=n(24509);let l="output.wav";function s(){let[e,t]=(0,o.useState)(!1),n=(0,o.useRef)("undefined"!=typeof document?new r.C:null),s=async()=>{if(e)return;let[r,o,i]=await Promise.all([(0,a.Wn)("https://assets.web.soundcloud.cloud/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.js","text/javascript"),(0,a.Wn)("https://assets.web.soundcloud.cloud/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.wasm","application/wasm"),(0,a.Wn)("https://assets.web.soundcloud.cloud/n/vendor/ffmpeg/core@0.12.6/dst/esm/ffmpeg-core.worker.js","text/javascript")]);await n.current?.load({coreURL:r,wasmURL:o,workerURL:i,classWorkerURL:i}),t(!0)};return{convertToWAV:async e=>{await s();let t=(0,i.m)(e.name),r=await (0,a.dc)(e),o=`input.${t}`;await n.current?.writeFile(o,r),await n.current?.exec(["-i",o,l]);let u=await n.current?.readFile(l);return URL.createObjectURL(new Blob([u],{type:"audio/wav"}))},normalize:async(e,t)=>{await s();let r=`input.${t}`,o=`output.${t}`;return await n.current?.writeFile(r,await a.dc(e)),"webm"===t?await n.current?.exec(["-i",r,"-c:a","libvorbis","-filter:a","loudnorm",o]):await n.current?.exec(["-i",r,"-filter:a","loudnorm",o]),new Blob([await n.current?.readFile(o)],{type:`audio/${t}`})},concat:async(e,t)=>{await s();let r="",o=0;for(let i of e){let e=`file-${o}.${t}`,l=`file-${o}.wav`;await n.current?.writeFile(e,await a.dc(i)),await n.current?.exec(["-i",e,l]),r+=`file '/${l}'
`,o++}let i="filelist.txt",l="combined.wav";return await n.current?.writeFile(i,r),await n.current?.exec(["-f","concat","-safe","0","-i",i,"-c","copy",l]),new Blob([await n.current?.readFile(l)],{type:"audio/wav"})}}}},99193:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(49971);let a=e=>{let[t,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=e.onPlay.subscribe(()=>{n(!0)}),r=e.onPause.subscribe(()=>{n(!1)}),a=e.onChange.subscribe(e=>{e.dead&&n(!1)});return()=>{t.remove(),r.remove(),a.remove()}},[e]),t}},50681:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var r,a,o=n(46099);(r=a||(a={})).generic="Generic Web",r.iosWebView="iOS Web View";let i=()=>{let{isInWebView:e}=(0,o.B)();return e?"iOS Web View":"Generic Web"}},65153:function(e,t,n){"use strict";var r=n(35979);n(49971);var a=n(68216);t.Z=e=>(0,r.jsx)(a.Z,{...e,viewBox:"0 0 24 24",fill:"none",children:(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21ZM12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm3.97 4.58c.29-.3.76-.3 1.05 0 .3.3.3.79.02 1.1l-6.75 7.37a.75.75 0 0 1-1.08 0l-2.6-2.9a.81.81 0 0 1 0-1.11c.29-.3.76-.3 1.05 0l2.09 2.35 6.22-6.82Z",clipRule:"evenodd"})})},31375:function(){}}]);